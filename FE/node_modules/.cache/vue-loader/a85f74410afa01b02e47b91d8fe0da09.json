{"remainingRequest":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\src\\pages\\tracuu\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\src\\pages\\tracuu\\index.vue","mtime":1704440180000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704332086000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\babel-loader\\lib\\index.js","mtime":1704440412000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704332086000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\vue-loader\\lib\\index.js","mtime":1704440418000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgTGF5b3V0IGZyb20gIi4uLy4uL2xheW91dHMvbWFpbiI7DQppbXBvcnQgUGFnZUhlYWRlciBmcm9tICJAL2NvbXBvbmVudHMvcGFnZS1oZWFkZXIiOw0KaW1wb3J0IERhdGVQaWNrZXIgZnJvbSAidnVlMi1kYXRlcGlja2VyIjsNCmltcG9ydCBhcHBDb25maWcgZnJvbSAiQC9hcHAuY29uZmlnIjsNCmltcG9ydCB7cGFnaW5nTW9kZWx9IGZyb20gIkAvbW9kZWxzL3BhZ2luZ01vZGVsIjsNCmltcG9ydCBNdWx0aXNlbGVjdCBmcm9tICJ2dWUtbXVsdGlzZWxlY3QiOw0KaW1wb3J0IHtWTW9uZXl9IGZyb20gJ3YtbW9uZXknDQppbXBvcnQge2hvYURvbk1vZGVsfSBmcm9tICJAL21vZGVscy9ob2FEb25Nb2RlbCI7DQppbXBvcnQge3Rob25nVGluSGFuZ0hvYU1vZGVsfSBmcm9tICJAL21vZGVscy90aG9uZ1RpbkhhbmdIb2FNb2RlbCI7DQppbXBvcnQge3JlcXVpcmVkfSBmcm9tICJ2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMiOw0KaW1wb3J0IHtkZWxldGVNb2RlbH0gZnJvbSAiQC9tb2RlbHMvZGVsZXRlTW9kZWwiOw0KaW1wb3J0IHtmb3JtYXROdW1iZXJ9IGZyb20gIkAvbW9kZWxzL2Zvcm1hdE51bWJlck1vZGVsIjsNCmltcG9ydCB7a2hhY2hIYW5nTW9kZWx9IGZyb20gIkAvbW9kZWxzL2toYWNoSGFuZ01vZGVsIjsNCmltcG9ydCBTd2l0Y2hlcyBmcm9tICJ2dWUtc3dpdGNoZXMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wdXRlZDogew0KICAgIGZvcm1hdE51bWJlcigpIHsNCiAgICAgIHJldHVybiBmb3JtYXROdW1iZXINCiAgICB9DQogIH0sDQogIHBhZ2U6IHsNCiAgICB0aXRsZTogIlRSQSBD4buoVSBIT8OBIMSQxqBOIiwNCiAgICBtZXRhOiBbe25hbWU6ICJkZXNjcmlwdGlvbiIsIGNvbnRlbnQ6IGFwcENvbmZpZy5kZXNjcmlwdGlvbn1dLA0KICB9LA0KICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdnVlL25vLXVudXNlZC1jb21wb25lbnRzDQogIGNvbXBvbmVudHM6IHtNdWx0aXNlbGVjdCwgTGF5b3V0LCBQYWdlSGVhZGVyLCBEYXRlUGlja2VyLFZNb25leX0sDQogIGRpcmVjdGl2ZXM6IHttb25leTogVk1vbmV5fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGl0bGU6ICJUUkEgQ+G7qFUgSE/DgSDEkMagTiIsDQogICAgICBpdGVtczogWw0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogIlRSQSBD4buoVSBIT8OBIMSQxqBOIiwNCiAgICAgICAgICBocmVmOiAnL3RyYS1jdXUnLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogIkRhbmggc8OhY2giLA0KICAgICAgICAgIGFjdGl2ZTogdHJ1ZSwNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIGRhdGE6IFtdLA0KICAgICAgZmllbGRzOiBbDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICdTVFQnLA0KICAgICAgICAgIGxhYmVsOiAnU1RUJywNCiAgICAgICAgICBjbGFzczogJ3RkLTUnLA0KICAgICAgICAgIHRoQ2xhc3M6ICdoaWRkZW4tc29ydGFibGUnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJjcmVhdGVkQXRTaG93IiwNCiAgICAgICAgICBsYWJlbDogIk5nw6B5IHBow6F0IGjDoG5oIiwNCiAgICAgICAgICBjbGFzczogJ3RkLTEwJywNCiAgICAgICAgICB0aENsYXNzOiAnaGlkZGVuLXNvcnRhYmxlJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiZnVsbE5hbWUiLA0KICAgICAgICAgIGxhYmVsOiAiTmjDom4gdmnDqm4gcGjDoXQgaMOgbmgiLA0KICAgICAgICAgIGNsYXNzOiAndGQtMjAnLA0KICAgICAgICAgIHRoQ2xhc3M6ICdoaWRkZW4tc29ydGFibGUnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJ0ZW5LaGFjaEhhbmciLA0KICAgICAgICAgIGxhYmVsOiAiVMOqbiBraMOhY2ggaMOgbmciLA0KICAgICAgICAgIGNsYXNzOiAndGQtMjAnLA0KICAgICAgICAgIHRoQ2xhc3M6ICdoaWRkZW4tc29ydGFibGUnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJpbnZvaWNlTm8iLA0KICAgICAgICAgIGxhYmVsOiAiU+G7kSBob8OhIMSRxqFuIiwNCiAgICAgICAgICBjbGFzczogJ3RkLTE1JywNCiAgICAgICAgICB0aENsYXNzOiAnaGlkZGVuLXNvcnRhYmxlJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAibWFTb1RodWUiLA0KICAgICAgICAgIGxhYmVsOiAiTcOjIHPhu5EgdGh14bq/IiwNCiAgICAgICAgICBjbGFzczogJ3RkLTE1JywNCiAgICAgICAgICB0aENsYXNzOiAnaGlkZGVuLXNvcnRhYmxlJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiY2h1eWVuRG9pIiwNCiAgICAgICAgICBsYWJlbDogIkNodXnhu4NuIMSR4buVaSIsDQogICAgICAgICAgY2xhc3M6ICd0ZC04JywNCiAgICAgICAgICB0aENsYXNzOiAnaGlkZGVuLXNvcnRhYmxlJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAidG9uZ1RpZW5TaG93IiwNCiAgICAgICAgICBsYWJlbDogIlThu5VuZyB0aeG7gW4iLA0KICAgICAgICAgIGNsYXNzOiAndGQtMTAnLA0KICAgICAgICAgIHRoQ2xhc3M6ICdoaWRkZW4tc29ydGFibGUnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJzdGF0dXNOYW1lIiwNCiAgICAgICAgICBsYWJlbDogIlRy4bqhbmcgdGjDoWkiLA0KICAgICAgICAgIGNsYXNzOiAndGQtMTUnLA0KICAgICAgICAgIHRoQ2xhc3M6ICdoaWRkZW4tc29ydGFibGUnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICdwcm9jZXNzJywNCiAgICAgICAgICBsYWJlbDogJycsDQogICAgICAgICAgY2xhc3M6ICd0ZC0xNScsDQogICAgICAgICAgdGhDbGFzczogJ2hpZGRlbi1zb3J0YWJsZScNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIGZpZWxkc01vZGFsOiBbDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJ0ZW5IYW5nSG9hIiwNCiAgICAgICAgICBsYWJlbDogIlTDqm4gaMOgbmcgaG/DoSIsDQogICAgICAgICAgY2xhc3M6ICd0ZC11c2VybmFtZScsDQogICAgICAgICAgdGhTdHlsZTogInRleHQtYWxpZ246Y2VudGVyIiwNCiAgICAgICAgICB0aENsYXNzOiAnaGlkZGVuLXNvcnRhYmxlJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiZG9uR2lhIiwNCiAgICAgICAgICBsYWJlbDogIsSQxqFuIGdpw6EiLA0KICAgICAgICAgIGNsYXNzOiAndGQtMTUnLA0KICAgICAgICAgIHRoQ2xhc3M6ICdoaWRkZW4tc29ydGFibGUnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJzb0x1b25nIiwNCiAgICAgICAgICBsYWJlbDogIlPhu5EgbMaw4bujbmciLA0KICAgICAgICAgIGNsYXNzOiAndGQtMTUnLA0KICAgICAgICAgIHRoQ2xhc3M6ICdoaWRkZW4tc29ydGFibGUnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBrZXk6ICJkb25WaVRpbmgiLA0KICAgICAgICAgIGxhYmVsOiAixJDGoW4gduG7iyB0w61uaCIsDQogICAgICAgICAgY2xhc3M6ICd0ZC0yMCcsDQogICAgICAgICAgdGhDbGFzczogJ2hpZGRlbi1zb3J0YWJsZScNCiAgICAgICAgfSwNCg0KICAgICAgICB7DQogICAgICAgICAga2V5OiAncHJvY2VzcycsDQogICAgICAgICAgbGFiZWw6ICcnLA0KICAgICAgICAgIGNsYXNzOiAidGQtNSIsDQogICAgICAgICAgdGhDbGFzczogJ2hpZGRlbi1zb3J0YWJsZScNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIG1vbmV5OiB7DQogICAgICAgIGRlY2ltYWw6ICIsIiwNCiAgICAgICAgdGhvdXNhbmRzOiAiLiIsDQogICAgICAgIHByZWZpeDogIiIsDQogICAgICAgIHN1ZmZpeDogIiIsDQogICAgICAgIHByZWNpc2lvbjogMCwNCiAgICAgICAgbWFza2VkOiBmYWxzZSwNCiAgICAgIH0sDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIHBhZ2VPcHRpb25zOiBbNSwgMTAsIDI1LCA1MCwgMTAwXSwNCiAgICAgIHNob3dNb2RhbDogZmFsc2UsDQogICAgICBzaG93RGVsZXRlTW9kYWw6IGZhbHNlLA0KICAgICAgc2hvd0RlbGV0ZU1vZGFsTmhhcDogZmFsc2UsDQogICAgICBzaG93RGVsZXRlVGFibGVNb2RhbDogZmFsc2UsDQogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLA0KICAgICAgaXNVcGRhdGUgOiBmYWxzZSwNCiAgICAgIGlzVXBkYXRlTGlzdCA6IGZhbHNlLA0KICAgICAgc3VibWl0dGVkUEg6IGZhbHNlLA0KICAgICAgc2hvd1BoYXRIYW5oTW9kYWw6IGZhbHNlLA0KICAgICAgc3VibWl0dGVkSHV5OiBmYWxzZSwNCiAgICAgIHNvcnRCeTogImFnZSIsDQogICAgICBmaWx0ZXI6IG51bGwsDQogICAgICBzb3J0RGVzYzogZmFsc2UsDQogICAgICBpc1Nob3cgOiBmYWxzZSwNCiAgICAgIGZpbHRlck9uOiBbXSwNCiAgICAgIGlzRGVsZXRlIDogdHJ1ZSwNCiAgICAgIG51bWJlck9mRWxlbWVudDogMSwNCiAgICAgIHRvdGFsUm93czogMSwNCiAgICAgIHBlclBhZ2UgOiAxMCwNCiAgICAgIHN0dDogMjAsDQogICAgICB2YWx1ZUxvYWlEaWNoVnVZVGU6IG51bGwsDQogICAgICB2YWx1ZVRodW9jIDogbnVsbCwNCiAgICAgIHZhbHVlRG9uVmlUaW5oIDogbnVsbCwNCiAgICAgIG1vZGVsOiBob2FEb25Nb2RlbC5iYXNlSnNvbigpLA0KICAgICAgaHV5TW9kZWwgOiBkZWxldGVNb2RlbC5iYXNlSnNvbigpLA0KICAgICAgbW9kZWxUaG9uZ1RpbjogdGhvbmdUaW5IYW5nSG9hTW9kZWwuYmFzZUpzb24oKSwNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgbGlzdEtoYWNoSGFuZzpbXSwNCiAgICAgIHRvbmdUaWVuIDogMCAsDQogICAgICBnaWFtR2lhIDogMCAsDQogICAgICBsaXN0SGluaFRodWM6IFtdLA0KICAgICAgbGlzdExvYWlEaWNoVnU6IFtdLA0KICAgICAgaXNTZW5kIDogdHJ1ZSwNCiAgICAgIGxpc3RUaHVvYyA6IFtdLA0KICAgICAgbGlzdERvblZpVGluaCA6IFtdLA0KICAgICAgdmFsdWVLaGFjaEhhbmc6bnVsbCwNCiAgICAgIHBhZ2luYXRpb246IHBhZ2luZ01vZGVsLmJhc2VKc29uKCksDQogICAgICBpdGVtRmlsdGVyOiB7DQogICAgICAgIGhpbmhUaHVjVGhhbmhUb2FuIDogbnVsbCwNCiAgICAgICAgbmdheUJhdERhdTpuZXcgRGF0ZSh0aGlzLmdldEN1cnJlbnREYXRlRm9ybWF0dGVkKCkpLA0KICAgICAgICBuZ2F5S2V0VGh1YzpuZXcgRGF0ZSh0aGlzLmdldEN1cnJlbnREYXRlRm9ybWF0dGVkKCkpLA0KICAgICAgICBjb250ZW50Om51bGwsDQogICAgICAgIHVzZXJOYW1lOm51bGwsDQogICAgICAgIHRyYW5nVGhhaToiQUxMIg0KICAgICAgfSwNCiAgICAgIGlzQ29sbGFwc2VTZWFyY2g6IGZhbHNlLA0KICAgICAgbGlzdE5ndW9pUGhhdEhhbmg6W10sDQogICAgICBsaXN0VHJhbmdUaGFpOlsNCiAgICAgICAgew0KICAgICAgICAgIGNvZGU6IkFMTCIsDQogICAgICAgICAgbmFtZToiQ0jhu4xOIFThuqRUIEPhuqIiDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBjb2RlOiJOSEFQIiwNCiAgICAgICAgICBuYW1lOiJIw7NhIMSRxqFuIG5ow6FwIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgY29kZToiREFQSEFUSEFOSCIsDQogICAgICAgICAgbmFtZToiSMOzYSDEkcahbiDEkcOjIHBow6F0IGjDoG5oIg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgY29kZToiVEhBWVRIRSIsDQogICAgICAgICAgbmFtZToiSMOzYSDEkcahbiB0aGF5IHRo4bq/Ig0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgY29kZToiREFYT0EiLA0KICAgICAgICAgIG5hbWU6IkjDs2EgxJHGoW4gxJHDoyB4w7NhIg0KICAgICAgICB9DQogICAgICBdDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBjb25zb2xlLmxvZygiTE9HIDogIiwgKQ0KICAgIHRoaXMuZ2V0TGlzdEhpbmhUaHVjKCk7DQogICAgdGhpcy5nZXRMaXN0TG9haURpY2hWdSgpOw0KICAgIHRoaXMuZ2V0TGlzdE5ndW9pUGhhdEhhbmgoKQ0KICB9LA0KICB2YWxpZGF0aW9uczogew0KICAgIGh1eU1vZGVsIDogew0KICAgICAgdmFuYmFuOiB7cmVxdWlyZWR9LA0KICAgICAgbHlkbzoge3JlcXVpcmVkfQ0KICAgIH0sDQogICAgbW9kZWw6IHsNCiAgICAgIGhpbmhUaHVjVGhhbmhUb2FuIDoge3JlcXVpcmVkfSwNCiAgICAgIHRlbktoYWNoSGFuZzoge3JlcXVpcmVkfSwNCiAgICAgIGRpYUNoaToge3JlcXVpcmVkfQ0KICAgIH0sDQogICAgbW9kZWxUaG9uZ1RpbiA6IHsNCiAgICAgIHRlbkhhbmdIb2E6IHtyZXF1aXJlZH0sDQogICAgfSwNCiAgICB2YWx1ZURvblZpVGluaCA6IHtyZXF1aXJlZH0sDQogICAgdmFsdWVUaHVvYyA6IHtyZXF1aXJlZH0sDQogICAgdmFsdWVMb2FpRGljaFZ1WVRlIDoge3JlcXVpcmVkfQ0KDQoNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG5vcm1hbGl6ZXIobm9kZSkgew0KICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gPT0gbnVsbCB8fCBub2RlLmNoaWxkcmVuID09ICdudWxsJykgew0KICAgICAgICBkZWxldGUgbm9kZS5jaGlsZHJlbjsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGdldExpc3REb25WaVRpbmgoKSB7DQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY29tbW9uU3RvcmUvZ2V0QWxsIiwgIkRNX0RPTlZJVElOSCIpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICB0aGlzLmxpc3REb25WaVRpbmggPSByZXMuZGF0YSB8fCBbXTsNCg0KICAgICAgfSkNCiAgICB9LA0KICAgIGFzeW5jIGdldExpc3RLaGFjaEhhbmcoKSB7DQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgia2hhY2hIYW5nU3RvcmUvZ2V0QWxsIikudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCJMT0cga2hhY2ggaGFuZyA6ICIsIHJlcy5kYXRhKQ0KICAgICAgICB0aGlzLmxpc3RLaGFjaEhhbmcgPSByZXMuZGF0YSB8fCBbXTsNCiAgICAgIH0pDQogICAgfSwNCiAgICBhc3luYyBnZXRMaXN0Tmd1b2lQaGF0SGFuaCgpIHsNCiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1c2VyU3RvcmUvZ2V0QWxsIikudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMubGlzdE5ndW9pUGhhdEhhbmggPSByZXMuZGF0YSB8fCBbXTsNCiAgICAgICAgdGhpcy5pdGVtRmlsdGVyLnVzZXJOYW1lID0gdGhpcy5saXN0Tmd1b2lQaGF0SGFuaC5hdCgwKTsNCiAgICAgIH0pDQogICAgfSwNCiAgICBhc3luYyBnZXRMaXN0SGluaFRodWMoKSB7DQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY29tbW9uU3RvcmUvZ2V0QWxsIiwgIkRNX0hJTkhUSFVDVEhBTkhUT0FOIikudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMubGlzdEhpbmhUaHVjID0gcmVzLmRhdGEgfHwgW107DQogICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgZ2V0TGlzdExvYWlEaWNoVnUoKSB7DQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgibG9haURpY2hWdVlUZVN0b3JlL2dldEFsbCIpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBjb25zb2xlLmxvZygiTE9HIExPQUkgRElDSCBWVSA6ICIsIHJlcy5kYXRhKQ0KICAgICAgICB0aGlzLmxpc3RMb2FpRGljaFZ1ID0gcmVzLmRhdGEgfHwgW107DQogICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgZm5HZXRMaXN0KCkgew0KICAgICAgdGhpcy4kcmVmcy50YmxMaXN0Py5yZWZyZXNoKCkNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZUNsb3NlKCkgew0KICAgICAgdGhpcy5zaG93RGVsZXRlVGFibGVNb2RhbCA9IGZhbHNlIDsNCiAgICAgIHRoaXMudmFsdWVEb25WaVRpbmggPSBudWxsOw0KICAgICAgdGhpcy52YWx1ZVRodW9jID0gbnVsbDsNCiAgICAgIHRoaXMudmFsdWVMb2FpRGljaFZ1WVRlID0gbnVsbDsNCiAgICAgIHRoaXMubW9kZWxUaG9uZ1RpbiA9IHRob25nVGluSGFuZ0hvYU1vZGVsLmJhc2VKc29uKCk7DQogICAgfSwNCiAgICBoYW5kbGVTZWFyY2goKSB7DQogICAgICB0aGlzLml0ZW1GaWx0ZXIuaXNTZWFyY2ggPSB0cnVlDQogICAgICB0aGlzLiRyZWZzLnRibExpc3QucmVmcmVzaCgpOw0KICAgIH0sDQogICAgaGFuZGxlQ2xlYXIoKXsNCiAgICAgIHRoaXMuaXRlbUZpbHRlci5oaW5oVGh1Y1RoYW5oVG9hbj1udWxsLA0KICAgICAgICAgIHRoaXMuaXRlbUZpbHRlci5uZ2F5QmF0RGF1PW5ldyBEYXRlKHRoaXMuZ2V0Q3VycmVudERhdGVGb3JtYXR0ZWQoKSksDQogICAgICAgICAgdGhpcy5pdGVtRmlsdGVyLm5nYXlLZXRUaHVjPW5ldyBEYXRlKHRoaXMuZ2V0Q3VycmVudERhdGVGb3JtYXR0ZWQoKSksDQogICAgICAgICAgdGhpcy5pdGVtRmlsdGVyLmNvbnRlbnQ9bnVsbCwNCiAgICAgICAgICB0aGlzLml0ZW1GaWx0ZXIuZmlsbD1udWxsLA0KICAgICAgICAgIHRoaXMuaXRlbUZpbHRlci50cmFuZ1RoYWk9IkFMTCIsDQogICAgICAgICAgdGhpcy5pdGVtRmlsdGVyLnVzZXJOYW1lPW51bGwNCg0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlTW9kYWxDbG9zZSgpIHsNCiAgICAgIHRoaXMuc2hvd01vZGFsID1mYWxzZTsNCiAgICAgIHRoaXMuaXNVcGRhdGUgPWZhbHNlOw0KICAgICAgdGhpcy5oYW5kbGVCYXNlVmFsdWUoKTsNCiAgICB9LA0KDQoNCg0KDQogICAgYXN5bmMgaGFuZGxlVXBkYXRlTGlzdChpdGVtKSB7DQogICAgICB0aGlzLmlzVXBkYXRlTGlzdCA9IHRydWU7DQogICAgICB0aGlzLnZhbHVlTG9haURpY2hWdVlUZSA9IGl0ZW0ubG9haURpY2hWdVlUZTsNCiAgICAgIGNvbnNvbGUubG9nKCJMT0cgQkVGT1JFIDogIiwgdGhpcy5pc1VwZGF0ZUxpc3QpDQogICAgICB0aGlzLm1vZGVsVGhvbmdUaW4gPSBpdGVtIDsNCiAgICAgIHRoaXMudmFsdWVEb25WaVRpbmggPSBpdGVtLmRvblZpVGluaCA7DQogICAgICB0aGlzLnZhbHVlVGh1b2MgPSBpdGVtLnRodW9jOw0KDQoNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZVVwZGF0ZShpZCkgew0KICAgICAgdGhpcy5nZXRMaXN0RG9uVmlUaW5oKCk7DQogICAgICB0aGlzLmdldExpc3RLaGFjaEhhbmcoKTsNCiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJob2FEb25TdG9yZS9nZXRCeUlkIiwgaWQpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGU9PT0wKSB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgICAgIHRoaXMubW9kZWwgPSBob2FEb25Nb2RlbC50b0pzb24ocmVzLmRhdGEpOw0KICAgICAgICAgIHRoaXMubGlzdCA9IHRoaXMubW9kZWwubGlzdDsNCiAgICAgICAgICB0aGlzLnRvbmdUaWVuID0gdGhpcy5tb2RlbC50b25nVGllbjsNCiAgICAgICAgICB0aGlzLiRyZWZzLnRibExpc3Q/LnJlZnJlc2goKQ0KICAgICAgICAgIHRoaXMuaXNVcGRhdGUgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic25hY2tCYXJTdG9yZS9hZGROb3RpZnkiLCB7DQogICAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSwNCiAgICAgICAgICAgIGNvZGU6IHJlcy5jb2RlLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KDQoNCiAgICBhc3luYyBoYW5kbGVDb252ZXJzaW9uSW52b2ljZShpZCkgew0KICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImhvYURvblN0b3JlL1NlbmRDb252ZXJzaW9uSW52b2ljZSIsIGlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLmRhdGEgIT0gbnVsbCkNCiAgICAgICAgICB7DQogICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFt0aGlzLmJhc2U2NFRvQXJyYXlCdWZmZXIocmVzLmRhdGEpXSwge3R5cGU6ICJhcHBsaWNhdGlvbi9wZGYifSk7DQogICAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgdmFyIG5hbWUgPSAiaG9hZG9uIjsNCiAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBuYW1lOw0KICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICAgICAgdGhpcy4kcmVmcy50YmxMaXN0LnJlZnJlc2goKTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNuYWNrQmFyU3RvcmUvYWRkTm90aWZ5Iiwgew0KICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UsDQogICAgICAgICAgICBjb2RlOiByZXMuY29kZSwNCiAgICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlU2VuZEludm9pY2VGcm9tRGF0YSh2YWx1ZSkgew0KICAgICAgICB0aGlzLm1vZGVsID0gdmFsdWU7DQogICAgICAgIHRoaXMuc2hvd1BoYXRIYW5oTW9kYWwgPSB0cnVlOw0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlQ2xvc2VQaGF0SGFuaCgpIHsNCiAgICAgIHRoaXMuc2hvd1BoYXRIYW5oTW9kYWwgPSBmYWxzZSA7DQogICAgICB0aGlzLm1vZGVsID0gaG9hRG9uTW9kZWwuYmFzZUpzb24oKTsNCiAgICB9LA0KDQogICAgYXN5bmMgaGFuZGxlU2VuZEludm9pY2VGcm9tRGF0YUFQSSgpIHsNCiAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLm1vZGVsLmlkICE9IG51bGwNCiAgICAgICkgew0KICAgICAgICBsZXQgbG9hZGVyID0gdGhpcy4kbG9hZGluZy5zaG93KHsNCiAgICAgICAgICBjb250YWluZXI6IHRoaXMuJHJlZnMuZm9ybUNvbnRhaW5lciwNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMuaXNTZW5kID0gZmFsc2U7DQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJob2FEb25TdG9yZS9TZW5kSW52b2ljZUZyb21EYXRhIix0aGlzLm1vZGVsKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLmRhdGEgIT0gbnVsbCkNCiAgICAgICAgICB7DQogICAgICAgICAgICAgIHRoaXMuc2hvd01vZGFsPSBmYWxzZTsNCiAgICAgICAgICAgICAgdGhpcy5zaG93UGhhdEhhbmhNb2RhbCA9IGZhbHNlOw0KICAgICAgICAgICAgICB0aGlzLiRyZWZzLnRibExpc3Q/LnJlZnJlc2goKQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic25hY2tCYXJTdG9yZS9hZGROb3RpZnkiLCB7DQogICAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSwNCiAgICAgICAgICAgIGNvZGU6IHJlcy5jb2RlLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICBsb2FkZXIuaGlkZSgpOw0KICAgICAgICB0aGlzLmlzU2VuZCA9IHRydWU7DQoNCiAgICAgIH0NCiAgICB9LA0KDQogICAgYXN5bmMgaGFuZGxlRGVsZXRlTW9kYWwoKSB7DQogICAvLyAgIGNvbnNvbGUubG9nKCJMT0cgWMOTQSBIQU5EIERFTEVURUQgTU9EQUwgOiAiICwgdGhpcy5tb2RlbFRob25nVGluKQ0KICAgICAgaWYgKHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSAhPSAwICYmIHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSAhPSBudWxsKSB7DQogICAgICAgIHRoaXMubW9kZWwubGlzdCA9IHRoaXMubW9kZWwubGlzdC5maWx0ZXIoeCA9PiB7DQogICAgICAgICAgaWYgKHgubWEgIT0gdGhpcy5tb2RlbFRob25nVGluLm1hKQ0KICAgICAgICAgICAgcmV0dXJuIHg7DQogICAgICAgIH0pDQogICAgICAgIGlmICh0aGlzLm1vZGVsVGhvbmdUaW4ua2hvbmdUcnUpIHsNCiAgICAgICAgICB0aGlzLmlzRGVsZXRlVGluaFBoaSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSAhPSAwICYmIHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSAhPSBudWxsKSB7DQogICAgICAgICAgdGhpcy5tb2RlbC5saXN0ID0gdGhpcy5tb2RlbC5saXN0LmZpbHRlcih4ID0+IHsNCiAgICAgICAgICAgIGlmICh4Lm1hICE9IHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSkgew0KICAgICAgICAgICAgICByZXR1cm4geDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMubGlzdFRob25nVGluID0gW107DQogICAgICAgICAgdGhpcy50b25nVGllbiA9IDA7DQogICAgICAgICAgdGhpcy5tb2RlbC5saXN0LmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZygiTE9HIE5HVVlFIE5UVUFOIEtJRVQgIiwgdGhpcy5tb2RlbC5saXN0LCBlbGVtZW50KTsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVsZXRlVGluaFBoaSAmJiBlbGVtZW50LnRodW9jLmR1b2NHaWFtR2lhDQogICAgICAgICAgICAgICAgJiYgZWxlbWVudC5sb2FpRGljaFZ1WVRlLmNvZGUgPT09ICIwOSIpIHsNCiAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc29MdW9uZyA+IDEpIHsNCiAgICAvLyAgICAgICAgICAgIGNvbnNvbGUubG9nKCJMT0cgU08gTFVPTkcgPiAxICAiLCB0aGlzLmlzRGVsZXRlVGluaFBoaSwgZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLnRvbmdUaWVuKSwgZWxlbWVudCk7DQogICAgICAgICAgICAgICAgdGhpcy50b25nVGllbiA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy50b25nVGllbikgKyBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKGVsZW1lbnQuZG9uR2lhKSArIGVsZW1lbnQudGh1b2Muc29UaWVuR2lhbUxhbkhhaTsNCiAgICAgICAgICAgICAgICB0aGlzLmxpc3RUaG9uZ1Rpbi5wdXNoKHRob25nVGluSGFuZ0hvYU1vZGVsLnNlbmRKc29uRmlyc3QoZWxlbWVudCwgZWxlbWVudC5tYSArIDEsIDEsIGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIoZWxlbWVudC5kb25HaWEpICsgZWxlbWVudC50aHVvYy5zb1RpZW5HaWFtTGFuSGFpLCB0cnVlKSk7DQogICAgICAgICAgICAgICAgZWxlbWVudC5kb25HaWEgPSBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKGVsZW1lbnQuZG9uR2lhKTsNCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiTE9HIE1PREVMIFRIT05HIFRJTiA6ICIsIHRoaXMudG9uZ1RpZW4sZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhKSAsIHRoaXMubW9kZWxUaG9uZ1Rpbi50aHVvYy5zb1RpZW5HaWFtTGFuSGFpKQ0KICAgICAgICAgICAgICAgIHRoaXMudG9uZ1RpZW4gPSBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMudG9uZ1RpZW4pICsgKGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIoZWxlbWVudC5kb25HaWEpICogKGVsZW1lbnQuc29MdW9uZyAtIDEpKTsNCiAgICAgICAgICAgICAgICAvLyAgICAgIGNvbnNvbGUubG9nKCJMT0cgTU9ERUwgVEhPTkcgVElOIDI6ICIsdGhpcy50b25nVGllbiwgZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhKSAsIHRoaXMubW9kZWxUaG9uZ1Rpbi5zb0x1b25nLTEpDQogICAgICAgICAgICAgICAgdGhpcy5saXN0VGhvbmdUaW4ucHVzaCh0aG9uZ1RpbkhhbmdIb2FNb2RlbC5zZW5kSnNvbkxlZnRTZWN0aW9uKGVsZW1lbnQpKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCJMT0cgU08gTFVPTkcgPCAxICIsIHRoaXMuaXNEZWxldGVUaW5oUGhpLCBlbGVtZW50LnNvTHVvbmcpOw0KICAgICAgICAgICAgICAgIHRoaXMudG9uZ1RpZW4gPSBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMudG9uZ1RpZW4pICsgKGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIoZWxlbWVudC5kb25HaWEpICsgZWxlbWVudC50aHVvYy5zb1RpZW5HaWFtTGFuSGFpKTsNCiAgICAgICAgICAgICAgICBlbGVtZW50LmRvbkdpYSA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIoZWxlbWVudC5kb25HaWEpICsgZWxlbWVudC50aHVvYy5zb1RpZW5HaWFtTGFuSGFpOw0KICAgICAgICAgICAgICAgIGVsZW1lbnQua2hvbmdUcnUgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHRoaXMubGlzdFRob25nVGluLnB1c2godGhvbmdUaW5IYW5nSG9hTW9kZWwuc2VuZEpzb24oZWxlbWVudCkpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHRoaXMuaXNEZWxldGVUaW5oUGhpID0gZmFsc2U7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJMT0cgQklOSCBUSFVPTkcgPCAxICIsIHRoaXMuaXNEZWxldGVUaW5oUGhpLCBlbGVtZW50LnNvTHVvbmcpOw0KICAgICAgICAgICAgICB0aGlzLnRvbmdUaWVuID0gZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLnRvbmdUaWVuKSArIChmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKGVsZW1lbnQuZG9uR2lhKSk7DQogICAgICAgICAgICAgIGVsZW1lbnQuZG9uR2lhID0gZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcihlbGVtZW50LmRvbkdpYSk7DQogICAgICAgICAgICAgIHRoaXMubGlzdFRob25nVGluLnB1c2godGhvbmdUaW5IYW5nSG9hTW9kZWwuc2VuZEpzb24oZWxlbWVudCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMubW9kZWwubGlzdCA9IHRoaXMubGlzdFRob25nVGluOw0KICAgICAgICAgIHRoaXMuc3R0Kys7DQoNCiAgICAgICAgICB0aGlzLnNob3dEZWxldGVUYWJsZU1vZGFsID0gZmFsc2U7DQogICAgICAgICAgLyogICAgICAgIHRoaXMudG9uZ1RpZW4gPSBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMudG9uZ1RpZW4pIC0gKGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSkqIHRoaXMubW9kZWxUaG9uZ1Rpbi5zb0x1b25nKSA7DQogICAgICAgIHRoaXMubW9kZWxUaG9uZ1RpbiA9IHRob25nVGluSGFuZ0hvYU1vZGVsLmJhc2VKc29uKCk7DQogICAgICAgIHRoaXMuc2hvd0RlbGV0ZVRhYmxlTW9kYWwgPSBmYWxzZTsqLw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCg0KICAgIGFzeW5jIGhhbmRsZVNlbmRSZXBsYWNlbWVudEludm9pY2VGcm9tRGF0YUFQSSgpIHsNCiAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLm1vZGVsLmlkICE9IG51bGwNCiAgICAgICkgew0KICAgICAgICBsZXQgbG9hZGVyID0gdGhpcy4kbG9hZGluZy5zaG93KHsNCiAgICAgICAgICBjb250YWluZXI6IHRoaXMuJHJlZnMuZm9ybUNvbnRhaW5lciwNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMuaXNTZW5kID0gZmFsc2U7DQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJob2FEb25TdG9yZS9TZW5kUmVwbGFjZW1lbnRJbnZvaWNlRnJvbURhdGEiLHRoaXMubW9kZWwpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YSAhPSBudWxsKQ0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuc2hvd1BoYXRIYW5oTW9kYWwgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnRibExpc3Q/LnJlZnJlc2goKQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic25hY2tCYXJTdG9yZS9hZGROb3RpZnkiLCB7DQogICAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSwNCiAgICAgICAgICAgIGNvZGU6IHJlcy5jb2RlLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICBsb2FkZXIuaGlkZSgpOw0KICAgICAgICB0aGlzLmlzU2VuZCA9IHRydWU7DQoNCiAgICAgIH0NCiAgICB9LA0KDQogICAgYXN5bmMgaGFuZGxlRGVsZXRlKHZhbHVlKSB7DQogICAgICBpZiAodmFsdWUuc3RhdHVzQ29kZSA9PT0iTkhBUCIpDQogICAgICB7DQogICAgICAgICB0aGlzLnNob3dEZWxldGVNb2RhbE5oYXAgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgZWxzZQ0KICAgICAgew0KICAgICAgICB0aGlzLnNob3dEZWxldGVNb2RhbCA9IHRydWU7DQogICAgICB9DQoNCiAgICAgIHRoaXMuaHV5TW9kZWwuaWQgPSB2YWx1ZS5pZDsNCiAgICB9LA0KICAgIGhhbmRsZVNob3dEZWxldGVNb2RhbFRhYmxlKHZhbHVlKSB7DQogICAgLyogIHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSA9IHZhbHVlLm1hOw0KICAgICAgdGhpcy5tb2RlbFRob25nVGluLnNvTHVvbmcgPSB2YWx1ZS5zb0x1b25nOw0KICAgICAgdGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSA9IHZhbHVlLmRvbkdpYTsNCiAgICAgIHRoaXMuc2hvd0RlbGV0ZVRhYmxlTW9kYWwgPSB0cnVlOyovDQogICAgICB0aGlzLmlzRGVsZXRlVGluaFBoaSA9IGZhbHNlOw0KICAgICAgdGhpcy5tb2RlbFRob25nVGluLm1hID0gdmFsdWUubWE7DQogICAgICB0aGlzLm1vZGVsVGhvbmdUaW4uc29MdW9uZyA9IHZhbHVlLnNvTHVvbmc7DQogICAgICB0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhID0gdmFsdWUuZG9uR2lhOw0KICAgICAgdGhpcy5tb2RlbFRob25nVGluLmtob25nVHJ1ID0gdmFsdWUua2hvbmdUcnU7DQogICAgICB0aGlzLnNob3dEZWxldGVUYWJsZU1vZGFsID0gdHJ1ZTsNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZURlbGV0ZUFQSSgpIHsNCiAgICAgIHRoaXMuc3VibWl0dGVkSHV5ID0gdHJ1ZTsNCiAvLyAgICAgY29uc29sZS5sb2coIkxPRyBTVUJNSVQgTElTVCAgOiAiLHRoaXMubW9kZWwpDQogICAgICB0aGlzLiR2LiR0b3VjaCgpOw0KICAgICAgaWYgKHRoaXMuJHYuaHV5TW9kZWwuJGludmFsaWQgKSB7DQogIC8vICAgICAgY29uc29sZS5sb2coIkxPRyBJTlZBTElEICA6ICIsIHRoaXMuJHYpDQogICAgICAgIHJldHVybjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuaXNEZWxldGUgPSBmYWxzZTsNCiAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImhvYURvblN0b3JlL2RlbGV0ZSIsIHRoaXMuaHV5TW9kZWwpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAwKSB7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnRibExpc3Q/LnJlZnJlc2goKQ0KICAgICAgICAgICAgdGhpcy5zaG93RGVsZXRlTW9kYWwgPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNuYWNrQmFyU3RvcmUvYWRkTm90aWZ5Iiwgew0KICAgICAgICAgICAgbWVzc2FnZTogcmVzLmRhdGEubWVzc2FnZSwNCiAgICAgICAgICAgIGNvZGU6IHJlcy5kYXRhLmNvZGUsDQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgdGhpcy5pc0RlbGV0ZSA9IHRydWU7DQogICAgfSwNCg0KICAgIGFzeW5jIGhhbmRsZURlbGV0ZU5oYXBBUEkoKSB7DQogICAgICAvLyAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICB0aGlzLmlzRGVsZXRlID0gZmFsc2U7DQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJob2FEb25TdG9yZS9kZWxldGUiLCB0aGlzLmh1eU1vZGVsKS50aGVuKChyZXMpID0+IHsNCiAgICAvLyAgICAgIGNvbnNvbGUubG9nKCJMT0cgUkVTICIsIHJlcy5kYXRhKQ0KICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAwKSB7DQogICAgICAgICAgICAvLyB0aGlzLm1vZGVsID0gaG9hRG9uTW9kZWwudG9Kc29uKHJlcy5kYXRhKTsNCiAgICAgICAgICAgIC8vIHRoaXMubGlzdCA9IHRoaXMubW9kZWwubGlzdDsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMudGJsTGlzdD8ucmVmcmVzaCgpDQogICAgICAgICAgICAvLyB0aGlzLmlzVXBkYXRlID0gdHJ1ZTsNCiAgICAgICAgICAgIC8vIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuc2hvd0RlbGV0ZU1vZGFsTmhhcCA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic25hY2tCYXJTdG9yZS9hZGROb3RpZnkiLCB7DQogICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tZXNzYWdlLA0KICAgICAgICAgICAgY29kZTogcmVzLmRhdGEuY29kZSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICB0aGlzLmlzRGVsZXRlID0gdHJ1ZTsNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZUJhc2VUaG9uZ1RpbigpIHsNCiAgICAgIHRoaXMubW9kZWxUaG9uZ1RpbiA9IHRob25nVGluSGFuZ0hvYU1vZGVsLmJhc2VKc29uKCk7DQogICAgICB0aGlzLnZhbHVlRG9uVmlUaW5oID0gbnVsbDsNCiAgICAgIHRoaXMudmFsdWVUaHVvYyA9IG51bGw7DQogICAgICB0aGlzLnZhbHVlTG9haURpY2hWdVlUZSA9IG51bGw7DQogICAgfSwNCg0KICAgIGZvcm1hdFByaWNlKHZhbHVlKSB7DQogICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKS5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCAiLiIpDQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVJbnZvaWNlTW9kYWwoKSB7DQogICAgICBpZiAoDQogICAgICAgICAgdGhpcy5tb2RlbC5pZCAhPSBudWxsDQogICAgICApIHsNCiAgICAgICAgbGV0IGxvYWRlciA9IHRoaXMuJGxvYWRpbmcuc2hvdyh7DQogICAgICAgICAgY29udGFpbmVyOiB0aGlzLiRyZWZzLmZvcm1Db250YWluZXIsDQogICAgICAgIH0pOw0KICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiaG9hRG9uU3RvcmUvR2V0SW52b2ljZURyYWZ0RnJvbURhdGEiLCB0aGlzLm1vZGVsLmlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLmRhdGEgIT0gbnVsbCkNCiAgICAgICAgICB7DQogICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFt0aGlzLmJhc2U2NFRvQXJyYXlCdWZmZXIocmVzLmRhdGEpXSwge3R5cGU6ICJhcHBsaWNhdGlvbi9wZGYifSk7DQogICAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAgICAgICAgICAgdmFyIG5hbWUgPSAiaG9hZG9uIjsNCiAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBuYW1lOw0KICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic25hY2tCYXJTdG9yZS9hZGROb3RpZnkiLCB7DQogICAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSwNCiAgICAgICAgICAgIGNvZGU6IHJlcy5jb2RlLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICBsb2FkZXIuaGlkZSgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlSW52b2ljZUZyb21EYXRhKGlkKSB7DQogICAgICBsZXQgbG9hZGVyID0gdGhpcy4kbG9hZGluZy5zaG93KHsNCiAgICAgICAgY29udGFpbmVyOiB0aGlzLiRyZWZzLmZvcm1Db250YWluZXIsDQogICAgICB9KTsNCiAgIC8vICAgY29uc29sZS5sb2coIkxPRyBJTlZPSUNFIDogIiwgaWQpOw0KDQogICAgICB0cnkgew0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJob2FEb25TdG9yZS9HZXRJbnZvaWNlRHJhZnRGcm9tRGF0YSIsIGlkKTsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgIT0gbnVsbCkgew0KDQogICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImhvYURvblN0b3JlL2dldEZpbGVWaWV0dGVsIixyZXNwb25zZS5kYXRhKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXMgID09IG51bGwgfHwgKHJlcyAhPSBudWxsICYmIHJlcy5maWxlVG9CeXRlcyA9PSBudWxsKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNuYWNrQmFyU3RvcmUvYWRkTm90aWZ5Iiwgew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJU4bqjaSBmaWxlIHRo4bqldCBi4bqhaSIsDQogICAgICAgICAgICAgICAgY29kZTogNDAwLA0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3RoaXMuYmFzZTY0VG9BcnJheUJ1ZmZlcihyZXMuZmlsZVRvQnl0ZXMpXSwgeyB0eXBlOiAiYXBwbGljYXRpb24vcGRmIiB9KTsNCiAgICAgICAgICAgIHRoaXMub3BlbkFuZFByaW50UERGKGJsb2IsICJob2Fkb24ucGRmIik7IC8vIFNldCB0aGUgZGVzaXJlZCBmaWxlIG5hbWUgaGVyZQ0KICAgICAgICAgIH0pDQoNCg0KICAgICAgLy8gICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3RoaXMuYmFzZTY0VG9BcnJheUJ1ZmZlcihyZXNwb25zZS5kYXRhKV0sIHsgdHlwZTogImFwcGxpY2F0aW9uL3BkZiIgfSk7DQogICAgICAvLyAvLyAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFt0aGlzLmJhc2U2NFRvQXJyYXlCdWZmZXIocmVzLmRhdGEpXSwge3R5cGU6ICJhcHBsaWNhdGlvbi9wZGYifSk7DQogICAgICAvLyAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAvLyAgICAgbGluay5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgICAvLyAgICAgdmFyIG5hbWUgPSAiaG9hZG9uIjsNCiAgICAgIC8vICAgICBsaW5rLmRvd25sb2FkID0gbmFtZTsNCiAgICAgIC8vICAgICBsaW5rLmNsaWNrKCk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNuYWNrQmFyU3RvcmUvYWRkTm90aWZ5Iiwgew0KICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UsDQogICAgICAgICAgY29kZTogcmVzcG9uc2UuY29kZSwNCiAgICAgICAgfSk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAvLyBIYW5kbGUgZXJyb3IgaGVyZQ0KICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBmZXRjaGluZyBpbnZvaWNlIGRhdGE6IiwgZXJyb3IpOw0KICAgICAgfQ0KDQogICAgICBsb2FkZXIuaGlkZSgpOw0KICAgIH0sDQoNCg0KICAgIGFzeW5jIGhhbmRsZVNob3dJbnZvaWNlRnJvbURhdGEoaWQpIHsNCiAgLy8gICAgY29uc29sZS5sb2coIkxPRyBTSE9XIElOVk9JQ0UgOiAiLCBpZCk7DQogICAgICBsZXQgbG9hZGVyID0gdGhpcy4kbG9hZGluZy5zaG93KHsNCiAgICAgICAgY29udGFpbmVyOiB0aGlzLiRyZWZzLmZvcm1Db250YWluZXIsDQogICAgICB9KTsNCi8vICAgICBjb25zb2xlLmxvZygiTE9HIElOVk9JQ0UgOiAiLCBpZCk7DQoNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImhvYURvblN0b3JlL0dldEludm9pY2VEcmFmdEZyb21EYXRhIiwgaWQpOw0KICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAhPSBudWxsKSB7DQogICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbdGhpcy5iYXNlNjRUb0FycmF5QnVmZmVyKHJlc3BvbnNlLmRhdGEpXSwgeyB0eXBlOiAiYXBwbGljYXRpb24vcGRmIiB9KTsNCiAgICAgICAgICB0aGlzLm9wZW5BbmRQcmludFBERihibG9iLCAiaG9hZG9uLnBkZiIpOyAvLyBTZXQgdGhlIGRlc2lyZWQgZmlsZSBuYW1lIGhlcmUNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic25hY2tCYXJTdG9yZS9hZGROb3RpZnkiLCB7DQogICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwNCiAgICAgICAgICBjb2RlOiByZXNwb25zZS5jb2RlLA0KICAgICAgICB9KTsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIC8vIEhhbmRsZSBlcnJvciBoZXJlDQogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGZldGNoaW5nIGludm9pY2UgZGF0YToiLCBlcnJvcik7DQogICAgICB9DQogICAgICBsb2FkZXIuaGlkZSgpOw0KICAgIH0sDQoNCiAgICBvcGVuQW5kUHJpbnRQREYoYmxvYiwgZmlsZU5hbWUpIHsNCiAgICAgIC8vIENyZWF0ZSBhIG5ldyBVUkwgZm9yIHRoZSBCbG9iIG9iamVjdA0KICAgICAgY29uc3QgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQoNCiAgICAgIC8vIE9wZW4gYSBuZXcgd2luZG93IHRvIGRpc3BsYXkgdGhlIFBERg0KICAgICAgY29uc3QgbmV3V2luZG93ID0gd2luZG93Lm9wZW4odXJsLCAiX2JsYW5rIik7DQoNCiAgICAgIC8vIENoZWNrIGlmIHRoZSBuZXcgd2luZG93IHdhcyBvcGVuZWQgc3VjY2Vzc2Z1bGx5DQogICAgICBpZiAobmV3V2luZG93KSB7DQogICAgICAgIC8vIFdhaXQgZm9yIHRoZSBuZXcgd2luZG93IHRvIGZpbmlzaCBsb2FkaW5nIHRoZSBQREYNCiAgICAgICAgbmV3V2luZG93Lm9ubG9hZCA9ICgpID0+IHsNCiAgICAgICAgICAvLyBQcmludCB0aGUgUERGDQogICAgICAgICAgbmV3V2luZG93LnByaW50KCk7DQogICAgICAgIH07DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyBIYW5kbGUgZXJyb3IgaWYgdGhlIG5ldyB3aW5kb3cgY291bGRuJ3QgYmUgb3BlbmVkDQogICAgICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBvcGVuIHRoZSBQREYgaW4gYSBuZXcgd2luZG93LiIpOw0KICAgICAgfQ0KDQogICAgICAvLyBTZXQgdGhlIGRvd25sb2FkIGF0dHJpYnV0ZSBvZiBhIHRlbXBvcmFyeSBhbmNob3IgZWxlbWVudCB0byB0cmlnZ2VyIHRoZSBkb3dubG9hZA0KICAgICAgLy8gY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsNCiAgICAgIC8vIGxpbmsuaHJlZiA9IHVybDsNCiAgICAgIC8vIGxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZTsNCiAgICAgIC8vIGxpbmsuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7DQogICAgICAvLyBsaW5rLmNsaWNrKCk7DQogICAgICAvLyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOw0KICAgIH0sDQoNCg0KICAgIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KQ0KICAgIHsNCiAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSB3aW5kb3cuYXRvYihiYXNlNjQpOw0KICAgICAgdmFyIGJpbmFyeUxlbiA9IGJpbmFyeVN0cmluZy5sZW5ndGg7DQogICAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShiaW5hcnlMZW4pOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaW5hcnlMZW47IGkrKykgew0KICAgICAgICB2YXIgYXNjaWkgPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTsNCiAgICAgICAgYnl0ZXNbaV0gPSBhc2NpaTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBieXRlczsNCiAgICB9LA0KICAgIG15UHJvdmlkZXIoY3R4KSB7DQogICAgICBjb25zdCBwYXJhbXMgPSB7DQogICAgICAgIHN0YXJ0OiBjdHguY3VycmVudFBhZ2UsDQogICAgICAgIGxpbWl0OiBjdHgucGVyUGFnZSwNCiAgICAgICAgY29udGVudDogdGhpcy5maWx0ZXIsDQogICAgICAgIHNvcnRCeTogY3R4LnNvcnRCeSwNCiAgICAgICAgc29ydERlc2M6IGN0eC5zb3J0RGVzYywNCiAgICAgICAgaGluaFRodWNUaGFuaFRvYW46dGhpcy5pdGVtRmlsdGVyLmhpbmhUaHVjVGhhbmhUb2FuLA0KICAgICAgICBzdGFydERhdGU6IHRoaXMuaXRlbUZpbHRlci5uZ2F5QmF0RGF1DQogICAgICAgICAgICA/IG5ldyBEYXRlKHRoaXMuaXRlbUZpbHRlci5uZ2F5QmF0RGF1KQ0KICAgICAgICAgICAgOiBudWxsLA0KICAgICAgICBlbmREYXRlOnRoaXMuaXRlbUZpbHRlci5uZ2F5S2V0VGh1Yw0KICAgICAgICAgICAgPyBuZXcgRGF0ZSh0aGlzLml0ZW1GaWx0ZXIubmdheUtldFRodWMpDQogICAgICAgICAgICA6IG51bGwsDQogICAgICAgIGNvbnRlbnRGaWxsOnRoaXMuaXRlbUZpbHRlci5jb250ZW50LA0KICAgICAgICB1c2VyTmFtZTp0aGlzLml0ZW1GaWx0ZXIudXNlck5hbWUsDQogICAgICAgIGZpbGw6dGhpcy5pdGVtRmlsdGVyLmZpbGwsDQogICAgICAgIHRyYW5nVGhhaTp0aGlzLml0ZW1GaWx0ZXIudHJhbmdUaGFpDQogICAgICB9DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICB0cnkgew0KICAgICAgICBsZXQgcHJvbWlzZSA9IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJob2FEb25TdG9yZS9nZXRTZWFyY2hQYWdpbmdQYXJhbXMiLCBwYXJhbXMpDQogICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4ocmVzcCA9PiB7DQogICAgICAgICAgbGV0IGl0ZW1zID0gcmVzcC5kYXRhLmRhdGENCiAgICAgICAgICB0aGlzLnRvdGFsUm93cyA9IHJlc3AuZGF0YS50b3RhbFJvd3MNCiAgICAgICAgICB0aGlzLm51bWJlck9mRWxlbWVudCA9IHJlc3AuZGF0YS5kYXRhLmxlbmd0aA0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgcmV0dXJuIGl0ZW1zIHx8IFtdDQogICAgICAgIH0pDQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0Q3VycmVudERhdGVGb3JtYXR0ZWQoKSB7DQogICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgICBjb25zdCBkYXkgPSBTdHJpbmcoY3VycmVudERhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpOw0KICAgICAgY29uc3QgbW9udGggPSBTdHJpbmcoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgICBjb25zdCB5ZWFyID0gY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKTsNCiAgICAgIHJldHVybiBgJHttb250aH0sJHtkYXl9LCR7eWVhcn1gOw0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlQmFzZVZhbHVlKCkgew0KICAgICAgdGhpcy5saXN0ID0gW107DQogICAgICB0aGlzLm1vZGVsID0gaG9hRG9uTW9kZWwuYmFzZUpzb24oKTsNCiAgICAgIHRoaXMubW9kZWwuaGluaFRodWNUaGFuaFRvYW4gPSAgdGhpcy5saXN0SGluaFRodWMuYXQoMCk7DQogICAgICB0aGlzLnZhbHVlS2hhY2hIYW5nID0gbnVsbDsNCiAgICAgIHRoaXMudmFsdWVEb25WaVRpbmggPSBudWxsOw0KICAgICAgdGhpcy52YWx1ZVRodW9jID0gbnVsbDsNCiAgICAgIHRoaXMudmFsdWVMb2FpRGljaFZ1WVRlID0gbnVsbA0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlU3VibWl0TGlzdChlKSB7DQogICAgLy8gIGNvbnNvbGUubG9nKCJMT0cgSEFORExFRCBTVUJNSVRFIExJU1QgIikNCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZTsNCiAgICAgIHRoaXMuJHYuJHRvdWNoKCk7DQogICAgICAgIGlmICh0aGlzLiR2Lm1vZGVsVGhvbmdUaW4uJGludmFsaWQgfHwgdGhpcy5tb2RlbC5saXN0ID09IDApDQogICAgICAgIHsNCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic25hY2tCYXJTdG9yZS9hZGROb3RpZnkiLCB7DQogICAgICAgICAgICBtZXNzYWdlOiAiVGjDtG5nIHRpbiBraMOhY2ggaMOgbmcgdsOgIGRhbmggc8OhY2ggaMOgbmcgaMOzYSBraMO0bmcgxJHGsOG7o2MgYuG7jyB0cuG7kW5nIiwNCiAgICAgICAgICAgIGNvZGU6IDIwLA0KICAgICAgICAgIH0pOw0KICAgICAgICByZXR1cm47DQogICAgICB9IGVsc2Ugew0KICAvLyAgICAgICAgICAgY29uc29sZS5sb2coIkxPRyBFTEUgQkFTRSA6ICIsIHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSkNCiAgICAgICAgICB0aGlzLm1vZGVsVGhvbmdUaW4ubWEgPSB0aGlzLnN0dDsNCiAgICAgICAgICB0aGlzLm1vZGVsVGhvbmdUaW4ubG9haURpY2hWdVlUZSA9IHRoaXMudmFsdWVMb2FpRGljaFZ1WVRlOw0KICAgICAgICAgIHRoaXMubW9kZWxUaG9uZ1Rpbi50aHVvYyA9ICB0aGlzLnZhbHVlVGh1b2M7DQogICAgICAgICAgdGhpcy5tb2RlbFRob25nVGluLmRvblZpVGluaCA9IHRoaXMudmFsdWVEb25WaVRpbmg7DQogICAgICAgICAgaWYgKHRoaXMubW9kZWwubGlzdC5sZW5ndGggPT0gMCAmJiB0aGlzLm1vZGVsVGhvbmdUaW4udGh1b2MuZHVvY0dpYW1HaWENCiAgICAgICAgICAgICAgJiYgdGhpcy5tb2RlbFRob25nVGluLmxvYWlEaWNoVnVZVGUuY29kZSA9PT0iMDkiKQ0KICAgICAgICAgIHsNCiAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2coIkxPRyAxIDogIikNCiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsVGhvbmdUaW4uc29MdW9uZyA+IDEpDQogICAgICAgICAgICB7DQovLyAgICAgICAgICAgICAgY29uc29sZS5sb2coIkxPRyBUSE9ORyBUSU4gU08gTFVPTkc6ICIsIHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSkNCiAgICAgICAgICAgICAgdGhpcy50b25nVGllbiA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy50b25nVGllbikgKyAoZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhKSkgOw0KICAgICAgICAgICAgICB0aGlzLm1vZGVsLmxpc3QucHVzaCh0aG9uZ1RpbkhhbmdIb2FNb2RlbC5zZW5kSnNvbkZpcnN0KHRoaXMubW9kZWxUaG9uZ1Rpbix0aGlzLm1vZGVsVGhvbmdUaW4ubWEgKyAyMCwxLHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEsIHRydWUpKTsNCiAgICAgICAgICAgICAgdGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSkgLSB0aGlzLm1vZGVsVGhvbmdUaW4udGh1b2Muc29UaWVuR2lhbUxhbkhhaTsNCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIkxPRyBNT0RFTCBUSE9ORyBUSU4gOiAiLCB0aGlzLnRvbmdUaWVuLGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSkgLCB0aGlzLm1vZGVsVGhvbmdUaW4udGh1b2Muc29UaWVuR2lhbUxhbkhhaSkNCiAgICAgICAgICAgICAgdGhpcy50b25nVGllbiA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy50b25nVGllbikgKyAoZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhKSAqICh0aGlzLm1vZGVsVGhvbmdUaW4uc29MdW9uZy0xKSk7DQogICAgICAgICAgICAgIC8vICAgICAgY29uc29sZS5sb2coIkxPRyBNT0RFTCBUSE9ORyBUSU4gMjogIix0aGlzLnRvbmdUaWVuLCBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEpICwgdGhpcy5tb2RlbFRob25nVGluLnNvTHVvbmctMSkNCiAgICAgICAgICAgICAgdGhpcy5tb2RlbC5saXN0LnB1c2godGhvbmdUaW5IYW5nSG9hTW9kZWwuc2VuZEpzb25MZWZ0U2VjdGlvbih0aGlzLm1vZGVsVGhvbmdUaW4pKTsNCiAgICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy50b25nVGllbiA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy50b25nVGllbikgKyAoZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhKSkgOw0KICAgICAgICAgICAgICB0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhID0gZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhKTsNCiAgICAgICAgICAgICAgdGhpcy5tb2RlbC5saXN0LnB1c2godGhvbmdUaW5IYW5nSG9hTW9kZWwuc2VuZEpzb24odGhpcy5tb2RlbFRob25nVGluKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGVsc2UgaWYgKHRoaXMubW9kZWwubGlzdC5sZW5ndGggPiAwICYmIHRoaXMubW9kZWxUaG9uZ1Rpbi50aHVvYy5kdW9jR2lhbUdpYQ0KICAgICAgICAgICAgICAmJiB0aGlzLm1vZGVsVGhvbmdUaW4ubG9haURpY2hWdVlUZS5jb2RlID09PSIwOSIpIHsNCiAgICAgICAgICAgIC8vICAgICAgY29uc29sZS5sb2coIkxPRyAyIDoiLCB0aGlzLm1vZGVsLmxpc3QgKQ0KICAgICAgICAgICAgdGhpcy5tb2RlbC5saXN0LmZpbHRlcih4ID0+IHsNCiAgICAgICAgICAgICAgaWYgKHgubG9haURpY2hWdVlUZS5jb2RlID09PSAiMDkiICYmIHgudGh1b2MuZHVvY0dpYW1HaWEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmdpYW1HaWEgPSB0aGlzLm1vZGVsVGhvbmdUaW4udGh1b2Muc29UaWVuR2lhbUxhbkhhaTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGlmICh0aGlzLmdpYW1HaWEgPT09IDApIHsNCiAgIC8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiIEdJQU0gR0lBID09PSAwICwgIiAsdGhpcy5naWFtR2lhKQ0KICAgICAgICAgICAgICB0aGlzLnRvbmdUaWVuID0gZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLnRvbmdUaWVuKSArIChmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEpKTsNCiAgICAgICAgICAgICAgdGhpcy5tb2RlbC5saXN0LnB1c2godGhvbmdUaW5IYW5nSG9hTW9kZWwuc2VuZEpzb25GaXJzdCh0aGlzLm1vZGVsVGhvbmdUaW4sIHRoaXMubW9kZWxUaG9uZ1Rpbi5tYSArIDIwLCAgMSwgdGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSx0cnVlKSk7DQogICAgICAgICAgICAgIHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEgPSBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEpIC0gdGhpcy5tb2RlbFRob25nVGluLnRodW9jLnNvVGllbkdpYW1MYW5IYWk7DQogLy8gICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkxPRyBNT0RFTCBUSE9ORyBUSU4gOiAiLCB0aGlzLnRvbmdUaWVuLCBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEpLCB0aGlzLm1vZGVsVGhvbmdUaW4udGh1b2Muc29UaWVuR2lhbUxhbkhhaSkNCiAgICAgICAgICAgICAgdGhpcy50b25nVGllbiA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy50b25nVGllbikgKyAoZm9ybWF0TnVtYmVyLkZvcm1hdE51bWJlcih0aGlzLm1vZGVsVGhvbmdUaW4uZG9uR2lhKSAqICh0aGlzLm1vZGVsVGhvbmdUaW4uc29MdW9uZyAtIDEpKTsNCiAvLyAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTE9HIE1PREVMIFRIT05HIFRJTiAyOiAiLCB0aGlzLnRvbmdUaWVuLCBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEpLCB0aGlzLm1vZGVsVGhvbmdUaW4uc29MdW9uZyAtIDEpDQogICAgICAgICAgICAgIHRoaXMubW9kZWwubGlzdC5wdXNoKHRob25nVGluSGFuZ0hvYU1vZGVsLnNlbmRKc29uTGVmdFNlY3Rpb24odGhpcy5tb2RlbFRob25nVGluKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KIC8vICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIiBHSUFNIEPDkyBHSUFNIEdJQSAgICwgIiAsdGhpcy50b25nVGllbiAsICkNCiAgICAgICAgICAgICAgdGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSkgLSB0aGlzLmdpYW1HaWE7DQogICAgICAgICAgICAgIHRoaXMudG9uZ1RpZW4gPSBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMudG9uZ1RpZW4pICsgKGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSkgKiB0aGlzLm1vZGVsVGhvbmdUaW4uc29MdW9uZyk7DQogICAgICAgICAgICAgIC8vICAgICAgY29uc29sZS5sb2coIiBTQVUgS0hJIEdJQU0gQ8OTIEdJQU0gR0lBICAgLCAiICx0aGlzLnRvbmdUaWVuICxmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEpICwgdGhpcy5tb2RlbFRob25nVGluLnNvTHVvbmcgKQ0KICAgICAgICAgICAgICB0aGlzLm1vZGVsLmxpc3QucHVzaCh0aG9uZ1RpbkhhbmdIb2FNb2RlbC5zZW5kSnNvbih0aGlzLm1vZGVsVGhvbmdUaW4pKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9ZWxzZSB7DQogIC8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJMT0cgTElTVCBCUkVBSyAiKQ0KICAgICAgICAgICAgdGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSA9IGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSk7DQogICAgICAgICAgICB0aGlzLm1vZGVsLmxpc3QucHVzaCh0aG9uZ1RpbkhhbmdIb2FNb2RlbC5zZW5kSnNvbih0aGlzLm1vZGVsVGhvbmdUaW4pKTsNCiAgICAgICAgICAgIHRoaXMudG9uZ1RpZW4gPSBmb3JtYXROdW1iZXIuRm9ybWF0TnVtYmVyKHRoaXMudG9uZ1RpZW4pICsgKGZvcm1hdE51bWJlci5Gb3JtYXROdW1iZXIodGhpcy5tb2RlbFRob25nVGluLmRvbkdpYSkqIHRoaXMubW9kZWxUaG9uZ1Rpbi5zb0x1b25nKSA7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuc3R0Kys7DQogICAgICAgICAgdGhpcy52YWx1ZVRodW9jID0gbnVsbDsNCiAgICAgICAgICB0aGlzLnZhbHVlTG9haURpY2hWdVlUZSA9bnVsbCA7DQogICAgICAgICAgdGhpcy52YWx1ZURvblZpVGluaCA9IG51bGwgOw0KICAgICAgICAgIHRoaXMubW9kZWxUaG9uZ1RpbiA9IHRob25nVGluSGFuZ0hvYU1vZGVsLmJhc2VKc29uKCk7DQogICAgICAgICAgdGhpcy5naWFtR2lhID0gMDsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLiRyZWZzLnRibExpc3RUYWJsZT8ucmVmcmVzaCgpDQovLyAgICAgICAgICBjb25zb2xlLmxvZygiTE9HIExJU1QgOiAiLCB0aGlzLm1vZGVsLmxpc3QpDQogICAgICB9DQogICAgfSwNCiAgICBkaXNhYmxlZEVuZERhdGUoZGF0ZSkgew0KICAgICAgcmV0dXJuIHRoaXMuaXRlbUZpbHRlci5uZ2F5QmF0RGF1ICYmIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCkgPCBuZXcgRGF0ZSh0aGlzLml0ZW1GaWx0ZXIubmdheUJhdERhdSkuc2V0SG91cnMoMCwgMCwgMCwgMCk7DQogICAgfSwNCiAgICBkaXNhYmxlZEVuZFRpbWUoZGF0ZSkgew0KICAgICAgcmV0dXJuIHRoaXMuaXRlbUZpbHRlci5uZ2F5QmF0RGF1ICYmIGRhdGUgPCB0aGlzLml0ZW1GaWx0ZXIubmdheUJhdERhdTsNCiAgICB9LA0KICAgIGZpbHRlck5vbk51bWVyaWMoZXZlbnQpIHsNCiAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7DQogICAgICBjb25zdCBudW1lcmljUmVnZXggPSAvXlswLTldKyQvOw0KICAgICAgaWYgKCFudW1lcmljUmVnZXgudGVzdChpbnB1dFZhbHVlKSkgew0KICAgICAgICBjb25zdCBmaWx0ZXJlZFZhbHVlID0gaW5wdXRWYWx1ZS5yZXBsYWNlKC9bXjAtOV0vZywgJycpOw0KICAgICAgICB0aGlzLm1vZGVsLm1hU29UaHVlID0gZmlsdGVyZWRWYWx1ZTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICB3YXRjaDogew0KICAgIG1vZGVsOiB7DQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaGFuZGxlcih2YWwpew0KICAgICAgICBpZiAodGhpcy5tb2RlbC5saXN0ICE9IG51bGwgJiYgdGhpcy5tb2RlbC5saXN0Lmxlbmd0aCA+IDApDQogICAgICAgIHsNCiAgICAgICAgICB0aGlzLmlzRGlzYWJsZWQgPSB0cnVlIDsNCiAgICAgICAgICB0aGlzLmlzU2hvdyA9IHRydWU7DQogICAgICAgIH1lbHNlIHsNCiAgICAgICAgICB0aGlzLmlzRGlzYWJsZWQgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHZhbHVlTG9haURpY2hWdVlUZTogew0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICAgIGhhbmRsZXIodmFsKSB7DQogICAgICAgIGlmICghdGhpcy5pc1VwZGF0ZUxpc3QpDQogICAgICAgIHsNCiAgICAgICAgICB0aGlzLmxpc3RUaHVvYyA9IFtdOw0KICAgICAgICAgIHRoaXMubW9kZWxUaG9uZ1RpbiA9IHRob25nVGluSGFuZ0hvYU1vZGVsLmJhc2VKc29uKCk7DQogICAgICAgICAgdGhpcy52YWx1ZVRodW9jID0gbnVsbDsNCiAgICAgICAgICB0aGlzLnZhbHVlRG9uVmlUaW5oID0gbnVsbDsNCg0KICAgICAgICAgIGlmICh0aGlzLnZhbHVlTG9haURpY2hWdVlUZSAhPSBudWxsICYmIHRoaXMudmFsdWVMb2FpRGljaFZ1WVRlLnRodW9jLmxlbmd0aCA+IDAgKQ0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMubGlzdFRodW9jID0gdGhpcy52YWx1ZUxvYWlEaWNoVnVZVGUudGh1b2M7DQogICAgICAgICAgfQ0KICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgdGhpcy5pc1VwZGF0ZUxpc3QgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgdmFsdWVUaHVvYzogew0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICAgIGhhbmRsZXIodmFsKSB7DQogICAgICAgIGlmICggdGhpcy52YWx1ZVRodW9jICE9IG51bGwgJiYgdGhpcy52YWx1ZVRodW9jLmRvblZpVGluaHMubGVuZ3RoICA+IDApDQogICAgICAgIHsNCiAgICAgICAgICAvLyB0aGlzLmxpc3REb25WaVRpbmggPSB0aGlzLnZhbHVlVGh1b2MuZG9uVmlUaW5oczsNCiAgICAgICAgICB0aGlzLm1vZGVsVGhvbmdUaW4udGVuSGFuZ0hvYSA9IHRoaXMudmFsdWVUaHVvYy5uYW1lOw0KICAgICAgICAgIHRoaXMubW9kZWxUaG9uZ1Rpbi5kb25HaWEgPSB0aGlzLnZhbHVlVGh1b2MuZG9uR2lhQmFuUmE7DQogICAgICAgICAgdGhpcy5tb2RlbFRob25nVGluLnBoaVRpZW0gPSB0aGlzLnZhbHVlVGh1b2MucGhpVGllbTsNCiAgICAgICAgICB0aGlzLm1vZGVsVGhvbmdUaW4ucGhpVHVWYW4gPSB0aGlzLnZhbHVlVGh1b2MucGhpVHVWYW47DQogICAgICAgICAgaWYgKHRoaXMubGlzdERvblZpVGluaC5sZW5ndGggPiAwKQ0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMudmFsdWVEb25WaVRpbmggPSB0aGlzLmxpc3REb25WaVRpbmguYXQoMCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICB2YWx1ZUtoYWNoSGFuZzp7DQogICAgICBkZWVwOnRydWUsDQogICAgICBoYW5kbGVyKCl7DQogICAgICAgIGlmKHRoaXMudmFsdWVLaGFjaEhhbmchPW51bGwpew0KICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJraGFjaEhhbmdTdG9yZS9nZXRCeUlkIiwgdGhpcy52YWx1ZUtoYWNoSGFuZykudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBpZiAocmVzLmNvZGU9PT0wKSB7DQogICAgICAgIC8vICAgICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgICAgICAgICB0aGlzLnRlbXBNb2RlbCA9IGtoYWNoSGFuZ01vZGVsLnRvSnNvbihyZXMuZGF0YSk7DQogICAgICAgICAgICAgIHRoaXMubW9kZWwudGVuRG9uVmk9dGhpcy50ZW1wTW9kZWwudGVuRG9uVmkNCiAgICAgICAgICAgICAgdGhpcy5tb2RlbC50ZW5LaGFjaEhhbmc9dGhpcy50ZW1wTW9kZWwudGVuS2hhY2hIYW5nDQogICAgICAgICAgICAgIHRoaXMubW9kZWwubWFTb1RodWU9dGhpcy50ZW1wTW9kZWwubWFTb1RodWUNCiAgICAgICAgICAgICAgdGhpcy5tb2RlbC5kaWFDaGk9dGhpcy50ZW1wTW9kZWwuZGlhQ2hpDQogICAgICAgICAgICAgIHRoaXMubW9kZWwudGFpS2hvYW5OZ2FuSGFuZz10aGlzLnRlbXBNb2RlbC50YWlLaG9hbk5nYW5IYW5nDQogICAgICAgICAgICAgIHRoaXMubW9kZWwua2hhY2hIYW5nPXRoaXMudGVtcE1vZGVsLnRlbktoYWNoSGFuZw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgIHRoaXMubW9kZWwudGVuRG9uVmk9bnVsbA0KICAgICAgICAgIHRoaXMubW9kZWwudGVuS2hhY2hIYW5nPW51bGwNCiAgICAgICAgICB0aGlzLm1vZGVsLm1hU29UaHVlPW51bGwNCiAgICAgICAgICB0aGlzLm1vZGVsLmRpYUNoaT1udWxsDQogICAgICAgICAgdGhpcy5tb2RlbC50YWlLaG9hbk5nYW5IYW5nPW51bGwNCiAgICAgICAgICB0aGlzLm1vZGVsLmtoYWNoSGFuZz1udWxsDQogICAgICAgIH0NCg0KICAgICAgfQ0KICAgIH0sDQogICAgc2hvd0RlbGV0ZU1vZGFsTmhhcCAodmFsKQ0KICAgIHsNCiAgICAgICAgdGhpcy5pc0RlbGV0ZSA9IHRydWU7DQogICAgfSwNCiAgICBzaG93TW9kYWwoc3RhdHVzKSB7DQogICAgICBpZiAoc3RhdHVzID09IGZhbHNlKSB7DQogICAgICAgIHRoaXMubW9kZWwgPSBob2FEb25Nb2RlbC5iYXNlSnNvbigpOw0KICAgICAgfWVsc2Ugew0KICAgICAgICBpZiAodGhpcy5tb2RlbC5oaW5oVGh1Y1RoYW5oVG9hbiA9PSBudWxsICYmIHRoaXMubGlzdEhpbmhUaHVjLmxlbmd0aCA+IDAgKTsNCiAgICAgICAgdGhpcy5tb2RlbC5oaW5oVGh1Y1RoYW5oVG9hbiA9ICB0aGlzLmxpc3RIaW5oVGh1Yy5hdCgwKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNob3dEZWxldGVNb2RhbCh2YWwpIHsNCiAgICAgIGlmICh2YWwgPT0gZmFsc2UpIHsNCiAgICAgICAgdGhpcy5tb2RlbC5pZCA9IG51bGw7DQogICAgICAgIHRoaXMuaXNEZWxldGUgPSB0cnVlOw0KICAgICAgICB0aGlzLmh1eU1vZGVsID0gZGVsZXRlTW9kZWwuYmFzZUpzb24oKTsNCiAgICAgIH0NCiAgICB9LA0KICAgICdpdGVtRmlsdGVyLnRyYW5nVGhhaSc6IHsNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBoYW5kbGVyKG5ld3ZhbHVlLG9sZHZhbHVlKXsNCiAgICAgICAgdGhpcy5pdGVtRmlsdGVyLnRyYW5nVGhhaT1uZXd2YWx1ZQ0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/tracuu","sourcesContent":["<script>\r\nimport Layout from \"../../layouts/main\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport DatePicker from \"vue2-datepicker\";\r\nimport appConfig from \"@/app.config\";\r\nimport {pagingModel} from \"@/models/pagingModel\";\r\nimport Multiselect from \"vue-multiselect\";\r\nimport {VMoney} from 'v-money'\r\nimport {hoaDonModel} from \"@/models/hoaDonModel\";\r\nimport {thongTinHangHoaModel} from \"@/models/thongTinHangHoaModel\";\r\nimport {required} from \"vuelidate/lib/validators\";\r\nimport {deleteModel} from \"@/models/deleteModel\";\r\nimport {formatNumber} from \"@/models/formatNumberModel\";\r\nimport {khachHangModel} from \"@/models/khachHangModel\";\r\nimport Switches from \"vue-switches\";\r\nexport default {\r\n  computed: {\r\n    formatNumber() {\r\n      return formatNumber\r\n    }\r\n  },\r\n  page: {\r\n    title: \"TRA CỨU HOÁ ĐƠN\",\r\n    meta: [{name: \"description\", content: appConfig.description}],\r\n  },\r\n  // eslint-disable-next-line vue/no-unused-components\r\n  components: {Multiselect, Layout, PageHeader, DatePicker,VMoney},\r\n  directives: {money: VMoney},\r\n  data() {\r\n    return {\r\n      title: \"TRA CỨU HOÁ ĐƠN\",\r\n      items: [\r\n        {\r\n          text: \"TRA CỨU HOÁ ĐƠN\",\r\n          href: '/tra-cuu',\r\n        },\r\n        {\r\n          text: \"Danh sách\",\r\n          active: true,\r\n        }\r\n      ],\r\n      data: [],\r\n      fields: [\r\n        {\r\n          key: 'STT',\r\n          label: 'STT',\r\n          class: 'td-5',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"createdAtShow\",\r\n          label: \"Ngày phát hành\",\r\n          class: 'td-10',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"fullName\",\r\n          label: \"Nhân viên phát hành\",\r\n          class: 'td-20',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"tenKhachHang\",\r\n          label: \"Tên khách hàng\",\r\n          class: 'td-20',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"invoiceNo\",\r\n          label: \"Số hoá đơn\",\r\n          class: 'td-15',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"maSoThue\",\r\n          label: \"Mã số thuế\",\r\n          class: 'td-15',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"chuyenDoi\",\r\n          label: \"Chuyển đổi\",\r\n          class: 'td-8',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"tongTienShow\",\r\n          label: \"Tổng tiền\",\r\n          class: 'td-10',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"statusName\",\r\n          label: \"Trạng thái\",\r\n          class: 'td-15',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: 'process',\r\n          label: '',\r\n          class: 'td-15',\r\n          thClass: 'hidden-sortable'\r\n        }\r\n      ],\r\n      fieldsModal: [\r\n        {\r\n          key: \"tenHangHoa\",\r\n          label: \"Tên hàng hoá\",\r\n          class: 'td-username',\r\n          thStyle: \"text-align:center\",\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"donGia\",\r\n          label: \"Đơn giá\",\r\n          class: 'td-15',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"soLuong\",\r\n          label: \"Số lượng\",\r\n          class: 'td-15',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n        {\r\n          key: \"donViTinh\",\r\n          label: \"Đơn vị tính\",\r\n          class: 'td-20',\r\n          thClass: 'hidden-sortable'\r\n        },\r\n\r\n        {\r\n          key: 'process',\r\n          label: '',\r\n          class: \"td-5\",\r\n          thClass: 'hidden-sortable'\r\n        }\r\n      ],\r\n      money: {\r\n        decimal: \",\",\r\n        thousands: \".\",\r\n        prefix: \"\",\r\n        suffix: \"\",\r\n        precision: 0,\r\n        masked: false,\r\n      },\r\n      currentPage: 1,\r\n      pageOptions: [5, 10, 25, 50, 100],\r\n      showModal: false,\r\n      showDeleteModal: false,\r\n      showDeleteModalNhap: false,\r\n      showDeleteTableModal: false,\r\n      submitted: false,\r\n      isUpdate : false,\r\n      isUpdateList : false,\r\n      submittedPH: false,\r\n      showPhatHanhModal: false,\r\n      submittedHuy: false,\r\n      sortBy: \"age\",\r\n      filter: null,\r\n      sortDesc: false,\r\n      isShow : false,\r\n      filterOn: [],\r\n      isDelete : true,\r\n      numberOfElement: 1,\r\n      totalRows: 1,\r\n      perPage : 10,\r\n      stt: 20,\r\n      valueLoaiDichVuYTe: null,\r\n      valueThuoc : null,\r\n      valueDonViTinh : null,\r\n      model: hoaDonModel.baseJson(),\r\n      huyModel : deleteModel.baseJson(),\r\n      modelThongTin: thongTinHangHoaModel.baseJson(),\r\n      list: [],\r\n      listKhachHang:[],\r\n      tongTien : 0 ,\r\n      giamGia : 0 ,\r\n      listHinhThuc: [],\r\n      listLoaiDichVu: [],\r\n      isSend : true,\r\n      listThuoc : [],\r\n      listDonViTinh : [],\r\n      valueKhachHang:null,\r\n      pagination: pagingModel.baseJson(),\r\n      itemFilter: {\r\n        hinhThucThanhToan : null,\r\n        ngayBatDau:new Date(this.getCurrentDateFormatted()),\r\n        ngayKetThuc:new Date(this.getCurrentDateFormatted()),\r\n        content:null,\r\n        userName:null,\r\n        trangThai:\"ALL\"\r\n      },\r\n      isCollapseSearch: false,\r\n      listNguoiPhatHanh:[],\r\n      listTrangThai:[\r\n        {\r\n          code:\"ALL\",\r\n          name:\"CHỌN TẤT CẢ\"\r\n        },\r\n        {\r\n          code:\"NHAP\",\r\n          name:\"Hóa đơn nháp\"\r\n        },\r\n        {\r\n          code:\"DAPHATHANH\",\r\n          name:\"Hóa đơn đã phát hành\"\r\n        },\r\n        {\r\n          code:\"THAYTHE\",\r\n          name:\"Hóa đơn thay thế\"\r\n        },\r\n        {\r\n          code:\"DAXOA\",\r\n          name:\"Hóa đơn đã xóa\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  created() {\r\n    console.log(\"LOG : \", )\r\n    this.getListHinhThuc();\r\n    this.getListLoaiDichVu();\r\n    this.getListNguoiPhatHanh()\r\n  },\r\n  validations: {\r\n    huyModel : {\r\n      vanban: {required},\r\n      lydo: {required}\r\n    },\r\n    model: {\r\n      hinhThucThanhToan : {required},\r\n      tenKhachHang: {required},\r\n      diaChi: {required}\r\n    },\r\n    modelThongTin : {\r\n      tenHangHoa: {required},\r\n    },\r\n    valueDonViTinh : {required},\r\n    valueThuoc : {required},\r\n    valueLoaiDichVuYTe : {required}\r\n\r\n\r\n  },\r\n  methods: {\r\n    normalizer(node) {\r\n      if (node.children == null || node.children == 'null') {\r\n        delete node.children;\r\n      }\r\n    },\r\n    async getListDonViTinh() {\r\n      await this.$store.dispatch(\"commonStore/getAll\", \"DM_DONVITINH\").then((res) => {\r\n        this.listDonViTinh = res.data || [];\r\n\r\n      })\r\n    },\r\n    async getListKhachHang() {\r\n      await this.$store.dispatch(\"khachHangStore/getAll\").then((res) => {\r\n        console.log(\"LOG khach hang : \", res.data)\r\n        this.listKhachHang = res.data || [];\r\n      })\r\n    },\r\n    async getListNguoiPhatHanh() {\r\n      await this.$store.dispatch(\"userStore/getAll\").then((res) => {\r\n        this.listNguoiPhatHanh = res.data || [];\r\n        this.itemFilter.userName = this.listNguoiPhatHanh.at(0);\r\n      })\r\n    },\r\n    async getListHinhThuc() {\r\n      await this.$store.dispatch(\"commonStore/getAll\", \"DM_HINHTHUCTHANHTOAN\").then((res) => {\r\n        this.listHinhThuc = res.data || [];\r\n      })\r\n    },\r\n    async getListLoaiDichVu() {\r\n      await this.$store.dispatch(\"loaiDichVuYTeStore/getAll\").then((res) => {\r\n        console.log(\"LOG LOAI DICH VU : \", res.data)\r\n        this.listLoaiDichVu = res.data || [];\r\n      })\r\n    },\r\n    async fnGetList() {\r\n      this.$refs.tblList?.refresh()\r\n    },\r\n    async handleClose() {\r\n      this.showDeleteTableModal = false ;\r\n      this.valueDonViTinh = null;\r\n      this.valueThuoc = null;\r\n      this.valueLoaiDichVuYTe = null;\r\n      this.modelThongTin = thongTinHangHoaModel.baseJson();\r\n    },\r\n    handleSearch() {\r\n      this.itemFilter.isSearch = true\r\n      this.$refs.tblList.refresh();\r\n    },\r\n    handleClear(){\r\n      this.itemFilter.hinhThucThanhToan=null,\r\n          this.itemFilter.ngayBatDau=new Date(this.getCurrentDateFormatted()),\r\n          this.itemFilter.ngayKetThuc=new Date(this.getCurrentDateFormatted()),\r\n          this.itemFilter.content=null,\r\n          this.itemFilter.fill=null,\r\n          this.itemFilter.trangThai=\"ALL\",\r\n          this.itemFilter.userName=null\r\n\r\n    },\r\n    async handleModalClose() {\r\n      this.showModal =false;\r\n      this.isUpdate =false;\r\n      this.handleBaseValue();\r\n    },\r\n\r\n\r\n\r\n\r\n    async handleUpdateList(item) {\r\n      this.isUpdateList = true;\r\n      this.valueLoaiDichVuYTe = item.loaiDichVuYTe;\r\n      console.log(\"LOG BEFORE : \", this.isUpdateList)\r\n      this.modelThongTin = item ;\r\n      this.valueDonViTinh = item.donViTinh ;\r\n      this.valueThuoc = item.thuoc;\r\n\r\n\r\n    },\r\n    async handleUpdate(id) {\r\n      this.getListDonViTinh();\r\n      this.getListKhachHang();\r\n      await this.$store.dispatch(\"hoaDonStore/getById\", id).then((res) => {\r\n        if (res.code===0) {\r\n          console.log(res)\r\n          this.model = hoaDonModel.toJson(res.data);\r\n          this.list = this.model.list;\r\n          this.tongTien = this.model.tongTien;\r\n          this.$refs.tblList?.refresh()\r\n          this.isUpdate = true;\r\n          this.showModal = true;\r\n        } else {\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n            message: res.message,\r\n            code: res.code,\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n\r\n    async handleConversionInvoice(id) {\r\n      await this.$store.dispatch(\"hoaDonStore/SendConversionInvoice\", id).then((res) => {\r\n          if (res.data != null)\r\n          {\r\n            var blob = new Blob([this.base64ToArrayBuffer(res.data)], {type: \"application/pdf\"});\r\n            var link = document.createElement('a');\r\n            link.href = window.URL.createObjectURL(blob);\r\n            var name = \"hoadon\";\r\n            link.download = name;\r\n            link.click();\r\n            this.$refs.tblList.refresh();\r\n          }\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n            message: res.message,\r\n            code: res.code,\r\n          });\r\n      });\r\n    },\r\n    async handleSendInvoiceFromData(value) {\r\n        this.model = value;\r\n        this.showPhatHanhModal = true;\r\n    },\r\n    async handleClosePhatHanh() {\r\n      this.showPhatHanhModal = false ;\r\n      this.model = hoaDonModel.baseJson();\r\n    },\r\n\r\n    async handleSendInvoiceFromDataAPI() {\r\n      if (\r\n          this.model.id != null\r\n      ) {\r\n        let loader = this.$loading.show({\r\n          container: this.$refs.formContainer,\r\n        });\r\n        this.isSend = false;\r\n        await this.$store.dispatch(\"hoaDonStore/SendInvoiceFromData\",this.model).then((res) => {\r\n          if (res.data != null)\r\n          {\r\n              this.showModal= false;\r\n              this.showPhatHanhModal = false;\r\n              this.$refs.tblList?.refresh()\r\n          }\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n            message: res.message,\r\n            code: res.code,\r\n          });\r\n        })\r\n        loader.hide();\r\n        this.isSend = true;\r\n\r\n      }\r\n    },\r\n\r\n    async handleDeleteModal() {\r\n   //   console.log(\"LOG XÓA HAND DELETED MODAL : \" , this.modelThongTin)\r\n      if (this.modelThongTin.ma != 0 && this.modelThongTin.ma != null) {\r\n        this.model.list = this.model.list.filter(x => {\r\n          if (x.ma != this.modelThongTin.ma)\r\n            return x;\r\n        })\r\n        if (this.modelThongTin.khongTru) {\r\n          this.isDeleteTinhPhi = true;\r\n        }\r\n        if (this.modelThongTin.ma != 0 && this.modelThongTin.ma != null) {\r\n          this.model.list = this.model.list.filter(x => {\r\n            if (x.ma != this.modelThongTin.ma) {\r\n              return x;\r\n            }\r\n          })\r\n          this.listThongTin = [];\r\n          this.tongTien = 0;\r\n          this.model.list.forEach((element) => {\r\n            //  console.log(\"LOG NGUYE NTUAN KIET \", this.model.list, element);\r\n            if (this.isDeleteTinhPhi && element.thuoc.duocGiamGia\r\n                && element.loaiDichVuYTe.code === \"09\") {\r\n              if (element.soLuong > 1) {\r\n    //            console.log(\"LOG SO LUONG > 1  \", this.isDeleteTinhPhi, formatNumber.FormatNumber(this.tongTien), element);\r\n                this.tongTien = formatNumber.FormatNumber(this.tongTien) + formatNumber.FormatNumber(element.donGia) + element.thuoc.soTienGiamLanHai;\r\n                this.listThongTin.push(thongTinHangHoaModel.sendJsonFirst(element, element.ma + 1, 1, formatNumber.FormatNumber(element.donGia) + element.thuoc.soTienGiamLanHai, true));\r\n                element.donGia = formatNumber.FormatNumber(element.donGia);\r\n                // console.log(\"LOG MODEL THONG TIN : \", this.tongTien,formatNumber.FormatNumber(this.modelThongTin.donGia) , this.modelThongTin.thuoc.soTienGiamLanHai)\r\n                this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(element.donGia) * (element.soLuong - 1));\r\n                //      console.log(\"LOG MODEL THONG TIN 2: \",this.tongTien, formatNumber.FormatNumber(this.modelThongTin.donGia) , this.modelThongTin.soLuong-1)\r\n                this.listThongTin.push(thongTinHangHoaModel.sendJsonLeftSection(element));\r\n              } else {\r\n       //         console.log(\"LOG SO LUONG < 1 \", this.isDeleteTinhPhi, element.soLuong);\r\n                this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(element.donGia) + element.thuoc.soTienGiamLanHai);\r\n                element.donGia = formatNumber.FormatNumber(element.donGia) + element.thuoc.soTienGiamLanHai;\r\n                element.khongTru = true;\r\n                this.listThongTin.push(thongTinHangHoaModel.sendJson(element));\r\n              }\r\n              this.isDeleteTinhPhi = false;\r\n            } else {\r\n         //     console.log(\"LOG BINH THUONG < 1 \", this.isDeleteTinhPhi, element.soLuong);\r\n              this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(element.donGia));\r\n              element.donGia = formatNumber.FormatNumber(element.donGia);\r\n              this.listThongTin.push(thongTinHangHoaModel.sendJson(element));\r\n            }\r\n          });\r\n          this.model.list = this.listThongTin;\r\n          this.stt++;\r\n\r\n          this.showDeleteTableModal = false;\r\n          /*        this.tongTien = formatNumber.FormatNumber(this.tongTien) - (formatNumber.FormatNumber(this.modelThongTin.donGia)* this.modelThongTin.soLuong) ;\r\n        this.modelThongTin = thongTinHangHoaModel.baseJson();\r\n        this.showDeleteTableModal = false;*/\r\n        }\r\n      }\r\n    },\r\n\r\n    async handleSendReplacementInvoiceFromDataAPI() {\r\n      if (\r\n          this.model.id != null\r\n      ) {\r\n        let loader = this.$loading.show({\r\n          container: this.$refs.formContainer,\r\n        });\r\n        this.isSend = false;\r\n        await this.$store.dispatch(\"hoaDonStore/SendReplacementInvoiceFromData\",this.model).then((res) => {\r\n          if (res.data != null)\r\n          {\r\n            this.showPhatHanhModal = false;\r\n            this.showModal = false;\r\n            this.$refs.tblList?.refresh()\r\n          }\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n            message: res.message,\r\n            code: res.code,\r\n          });\r\n        })\r\n        loader.hide();\r\n        this.isSend = true;\r\n\r\n      }\r\n    },\r\n\r\n    async handleDelete(value) {\r\n      if (value.statusCode ===\"NHAP\")\r\n      {\r\n         this.showDeleteModalNhap = true;\r\n      }\r\n      else\r\n      {\r\n        this.showDeleteModal = true;\r\n      }\r\n\r\n      this.huyModel.id = value.id;\r\n    },\r\n    handleShowDeleteModalTable(value) {\r\n    /*  this.modelThongTin.ma = value.ma;\r\n      this.modelThongTin.soLuong = value.soLuong;\r\n      this.modelThongTin.donGia = value.donGia;\r\n      this.showDeleteTableModal = true;*/\r\n      this.isDeleteTinhPhi = false;\r\n      this.modelThongTin.ma = value.ma;\r\n      this.modelThongTin.soLuong = value.soLuong;\r\n      this.modelThongTin.donGia = value.donGia;\r\n      this.modelThongTin.khongTru = value.khongTru;\r\n      this.showDeleteTableModal = true;\r\n    },\r\n    async handleDeleteAPI() {\r\n      this.submittedHuy = true;\r\n //     console.log(\"LOG SUBMIT LIST  : \",this.model)\r\n      this.$v.$touch();\r\n      if (this.$v.huyModel.$invalid ) {\r\n  //      console.log(\"LOG INVALID  : \", this.$v)\r\n        return;\r\n      } else {\r\n        this.isDelete = false;\r\n        await this.$store.dispatch(\"hoaDonStore/delete\", this.huyModel).then((res) => {\r\n          if (res.data.code === 0) {\r\n            this.$refs.tblList?.refresh()\r\n            this.showDeleteModal = false;\r\n          }\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n            message: res.data.message,\r\n            code: res.data.code,\r\n          });\r\n        });\r\n      }\r\n      this.isDelete = true;\r\n    },\r\n\r\n    async handleDeleteNhapAPI() {\r\n      //  e.preventDefault();\r\n        this.isDelete = false;\r\n        await this.$store.dispatch(\"hoaDonStore/delete\", this.huyModel).then((res) => {\r\n    //      console.log(\"LOG RES \", res.data)\r\n          if (res.data.code === 0) {\r\n            // this.model = hoaDonModel.toJson(res.data);\r\n            // this.list = this.model.list;\r\n            this.$refs.tblList?.refresh()\r\n            // this.isUpdate = true;\r\n            // this.showModal = true;\r\n            this.showDeleteModalNhap = false;\r\n          }\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n            message: res.data.message,\r\n            code: res.data.code,\r\n          });\r\n        });\r\n      this.isDelete = true;\r\n    },\r\n    async handleBaseThongTin() {\r\n      this.modelThongTin = thongTinHangHoaModel.baseJson();\r\n      this.valueDonViTinh = null;\r\n      this.valueThuoc = null;\r\n      this.valueLoaiDichVuYTe = null;\r\n    },\r\n\r\n    formatPrice(value) {\r\n      return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")\r\n    },\r\n    async handleInvoiceModal() {\r\n      if (\r\n          this.model.id != null\r\n      ) {\r\n        let loader = this.$loading.show({\r\n          container: this.$refs.formContainer,\r\n        });\r\n        await this.$store.dispatch(\"hoaDonStore/GetInvoiceDraftFromData\", this.model.id).then((res) => {\r\n          if (res.data != null)\r\n          {\r\n            var blob = new Blob([this.base64ToArrayBuffer(res.data)], {type: \"application/pdf\"});\r\n            var link = document.createElement('a');\r\n            link.href = window.URL.createObjectURL(blob);\r\n            var name = \"hoadon\";\r\n            link.download = name;\r\n            link.click();\r\n          }\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n            message: res.message,\r\n            code: res.code,\r\n          });\r\n        })\r\n        loader.hide();\r\n      }\r\n    },\r\n    async handleInvoiceFromData(id) {\r\n      let loader = this.$loading.show({\r\n        container: this.$refs.formContainer,\r\n      });\r\n   //   console.log(\"LOG INVOICE : \", id);\r\n\r\n      try {\r\n        const response = await this.$store.dispatch(\"hoaDonStore/GetInvoiceDraftFromData\", id);\r\n        if (response.data != null) {\r\n\r\n          await this.$store.dispatch(\"hoaDonStore/getFileViettel\",response.data).then((res) => {\r\n            if (res  == null || (res != null && res.fileToBytes == null))\r\n            {\r\n              this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n                message: \"Tải file thất bại\",\r\n                code: 400,\r\n              });\r\n            }\r\n            var blob = new Blob([this.base64ToArrayBuffer(res.fileToBytes)], { type: \"application/pdf\" });\r\n            this.openAndPrintPDF(blob, \"hoadon.pdf\"); // Set the desired file name here\r\n          })\r\n\r\n\r\n      //     var blob = new Blob([this.base64ToArrayBuffer(response.data)], { type: \"application/pdf\" });\r\n      // //    var blob = new Blob([this.base64ToArrayBuffer(res.data)], {type: \"application/pdf\"});\r\n      //     var link = document.createElement('a');\r\n      //     link.href = window.URL.createObjectURL(blob);\r\n      //     var name = \"hoadon\";\r\n      //     link.download = name;\r\n      //     link.click();\r\n        }\r\n        this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n          message: response.message,\r\n          code: response.code,\r\n        });\r\n      } catch (error) {\r\n        // Handle error here\r\n        console.error(\"Error fetching invoice data:\", error);\r\n      }\r\n\r\n      loader.hide();\r\n    },\r\n\r\n\r\n    async handleShowInvoiceFromData(id) {\r\n  //    console.log(\"LOG SHOW INVOICE : \", id);\r\n      let loader = this.$loading.show({\r\n        container: this.$refs.formContainer,\r\n      });\r\n//     console.log(\"LOG INVOICE : \", id);\r\n\r\n      try {\r\n        const response = await this.$store.dispatch(\"hoaDonStore/GetInvoiceDraftFromData\", id);\r\n        if (response.data != null) {\r\n          var blob = new Blob([this.base64ToArrayBuffer(response.data)], { type: \"application/pdf\" });\r\n          this.openAndPrintPDF(blob, \"hoadon.pdf\"); // Set the desired file name here\r\n        }\r\n        this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n          message: response.message,\r\n          code: response.code,\r\n        });\r\n      } catch (error) {\r\n        // Handle error here\r\n        console.error(\"Error fetching invoice data:\", error);\r\n      }\r\n      loader.hide();\r\n    },\r\n\r\n    openAndPrintPDF(blob, fileName) {\r\n      // Create a new URL for the Blob object\r\n      const url = window.URL.createObjectURL(blob);\r\n\r\n      // Open a new window to display the PDF\r\n      const newWindow = window.open(url, \"_blank\");\r\n\r\n      // Check if the new window was opened successfully\r\n      if (newWindow) {\r\n        // Wait for the new window to finish loading the PDF\r\n        newWindow.onload = () => {\r\n          // Print the PDF\r\n          newWindow.print();\r\n        };\r\n      } else {\r\n        // Handle error if the new window couldn't be opened\r\n        console.error(\"Failed to open the PDF in a new window.\");\r\n      }\r\n\r\n      // Set the download attribute of a temporary anchor element to trigger the download\r\n      // const link = document.createElement(\"a\");\r\n      // link.href = url;\r\n      // link.download = fileName;\r\n      // link.style.display = \"none\";\r\n      // document.body.appendChild(link);\r\n      // link.click();\r\n      // document.body.removeChild(link);\r\n    },\r\n\r\n\r\n    base64ToArrayBuffer(base64)\r\n    {\r\n      var binaryString = window.atob(base64);\r\n      var binaryLen = binaryString.length;\r\n      var bytes = new Uint8Array(binaryLen);\r\n      for (var i = 0; i < binaryLen; i++) {\r\n        var ascii = binaryString.charCodeAt(i);\r\n        bytes[i] = ascii;\r\n      }\r\n      return bytes;\r\n    },\r\n    myProvider(ctx) {\r\n      const params = {\r\n        start: ctx.currentPage,\r\n        limit: ctx.perPage,\r\n        content: this.filter,\r\n        sortBy: ctx.sortBy,\r\n        sortDesc: ctx.sortDesc,\r\n        hinhThucThanhToan:this.itemFilter.hinhThucThanhToan,\r\n        startDate: this.itemFilter.ngayBatDau\r\n            ? new Date(this.itemFilter.ngayBatDau)\r\n            : null,\r\n        endDate:this.itemFilter.ngayKetThuc\r\n            ? new Date(this.itemFilter.ngayKetThuc)\r\n            : null,\r\n        contentFill:this.itemFilter.content,\r\n        userName:this.itemFilter.userName,\r\n        fill:this.itemFilter.fill,\r\n        trangThai:this.itemFilter.trangThai\r\n      }\r\n      this.loading = true\r\n      try {\r\n        let promise = this.$store.dispatch(\"hoaDonStore/getSearchPagingParams\", params)\r\n        return promise.then(resp => {\r\n          let items = resp.data.data\r\n          this.totalRows = resp.data.totalRows\r\n          this.numberOfElement = resp.data.data.length\r\n          this.loading = false\r\n          return items || []\r\n        })\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    getCurrentDateFormatted() {\r\n      const currentDate = new Date();\r\n      const day = String(currentDate.getDate()).padStart(2, '0');\r\n      const month = String(currentDate.getMonth() + 1).padStart(2, '0');\r\n      const year = currentDate.getFullYear();\r\n      return `${month},${day},${year}`;\r\n    },\r\n    async handleBaseValue() {\r\n      this.list = [];\r\n      this.model = hoaDonModel.baseJson();\r\n      this.model.hinhThucThanhToan =  this.listHinhThuc.at(0);\r\n      this.valueKhachHang = null;\r\n      this.valueDonViTinh = null;\r\n      this.valueThuoc = null;\r\n      this.valueLoaiDichVuYTe = null\r\n    },\r\n    async handleSubmitList(e) {\r\n    //  console.log(\"LOG HANDLED SUBMITE LIST \")\r\n      e.preventDefault();\r\n      this.submitted = true;\r\n      this.$v.$touch();\r\n        if (this.$v.modelThongTin.$invalid || this.model.list == 0)\r\n        {\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", {\r\n            message: \"Thông tin khách hàng và danh sách hàng hóa không được bỏ trống\",\r\n            code: 20,\r\n          });\r\n        return;\r\n      } else {\r\n  //           console.log(\"LOG ELE BASE : \", this.modelThongTin.ma)\r\n          this.modelThongTin.ma = this.stt;\r\n          this.modelThongTin.loaiDichVuYTe = this.valueLoaiDichVuYTe;\r\n          this.modelThongTin.thuoc =  this.valueThuoc;\r\n          this.modelThongTin.donViTinh = this.valueDonViTinh;\r\n          if (this.model.list.length == 0 && this.modelThongTin.thuoc.duocGiamGia\r\n              && this.modelThongTin.loaiDichVuYTe.code ===\"09\")\r\n          {\r\n            //   console.log(\"LOG 1 : \")\r\n            if (this.modelThongTin.soLuong > 1)\r\n            {\r\n//              console.log(\"LOG THONG TIN SO LUONG: \", this.modelThongTin.ma)\r\n              this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(this.modelThongTin.donGia)) ;\r\n              this.model.list.push(thongTinHangHoaModel.sendJsonFirst(this.modelThongTin,this.modelThongTin.ma + 20,1,this.modelThongTin.donGia, true));\r\n              this.modelThongTin.donGia = formatNumber.FormatNumber(this.modelThongTin.donGia) - this.modelThongTin.thuoc.soTienGiamLanHai;\r\n              // console.log(\"LOG MODEL THONG TIN : \", this.tongTien,formatNumber.FormatNumber(this.modelThongTin.donGia) , this.modelThongTin.thuoc.soTienGiamLanHai)\r\n              this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(this.modelThongTin.donGia) * (this.modelThongTin.soLuong-1));\r\n              //      console.log(\"LOG MODEL THONG TIN 2: \",this.tongTien, formatNumber.FormatNumber(this.modelThongTin.donGia) , this.modelThongTin.soLuong-1)\r\n              this.model.list.push(thongTinHangHoaModel.sendJsonLeftSection(this.modelThongTin));\r\n            }else {\r\n              this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(this.modelThongTin.donGia)) ;\r\n              this.modelThongTin.donGia = formatNumber.FormatNumber(this.modelThongTin.donGia);\r\n              this.model.list.push(thongTinHangHoaModel.sendJson(this.modelThongTin));\r\n            }\r\n          }\r\n          else if (this.model.list.length > 0 && this.modelThongTin.thuoc.duocGiamGia\r\n              && this.modelThongTin.loaiDichVuYTe.code ===\"09\") {\r\n            //      console.log(\"LOG 2 :\", this.model.list )\r\n            this.model.list.filter(x => {\r\n              if (x.loaiDichVuYTe.code === \"09\" && x.thuoc.duocGiamGia) {\r\n                this.giamGia = this.modelThongTin.thuoc.soTienGiamLanHai;\r\n              }\r\n            })\r\n            if (this.giamGia === 0) {\r\n   //                 console.log(\" GIAM GIA === 0 , \" ,this.giamGia)\r\n              this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(this.modelThongTin.donGia));\r\n              this.model.list.push(thongTinHangHoaModel.sendJsonFirst(this.modelThongTin, this.modelThongTin.ma + 20,  1, this.modelThongTin.donGia,true));\r\n              this.modelThongTin.donGia = formatNumber.FormatNumber(this.modelThongTin.donGia) - this.modelThongTin.thuoc.soTienGiamLanHai;\r\n //                   console.log(\"LOG MODEL THONG TIN : \", this.tongTien, formatNumber.FormatNumber(this.modelThongTin.donGia), this.modelThongTin.thuoc.soTienGiamLanHai)\r\n              this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(this.modelThongTin.donGia) * (this.modelThongTin.soLuong - 1));\r\n //                   console.log(\"LOG MODEL THONG TIN 2: \", this.tongTien, formatNumber.FormatNumber(this.modelThongTin.donGia), this.modelThongTin.soLuong - 1)\r\n              this.model.list.push(thongTinHangHoaModel.sendJsonLeftSection(this.modelThongTin));\r\n            } else {\r\n //                  console.log(\" GIAM CÓ GIAM GIA   , \" ,this.tongTien , )\r\n              this.modelThongTin.donGia = formatNumber.FormatNumber(this.modelThongTin.donGia) - this.giamGia;\r\n              this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(this.modelThongTin.donGia) * this.modelThongTin.soLuong);\r\n              //      console.log(\" SAU KHI GIAM CÓ GIAM GIA   , \" ,this.tongTien ,formatNumber.FormatNumber(this.modelThongTin.donGia) , this.modelThongTin.soLuong )\r\n              this.model.list.push(thongTinHangHoaModel.sendJson(this.modelThongTin));\r\n            }\r\n          }else {\r\n  //                console.log(\"LOG LIST BREAK \")\r\n            this.modelThongTin.donGia = formatNumber.FormatNumber(this.modelThongTin.donGia);\r\n            this.model.list.push(thongTinHangHoaModel.sendJson(this.modelThongTin));\r\n            this.tongTien = formatNumber.FormatNumber(this.tongTien) + (formatNumber.FormatNumber(this.modelThongTin.donGia)* this.modelThongTin.soLuong) ;\r\n          }\r\n          this.stt++;\r\n          this.valueThuoc = null;\r\n          this.valueLoaiDichVuYTe =null ;\r\n          this.valueDonViTinh = null ;\r\n          this.modelThongTin = thongTinHangHoaModel.baseJson();\r\n          this.giamGia = 0;\r\n          this.loading = false;\r\n          this.$refs.tblListTable?.refresh()\r\n//          console.log(\"LOG LIST : \", this.model.list)\r\n      }\r\n    },\r\n    disabledEndDate(date) {\r\n      return this.itemFilter.ngayBatDau && date.setHours(0, 0, 0, 0) < new Date(this.itemFilter.ngayBatDau).setHours(0, 0, 0, 0);\r\n    },\r\n    disabledEndTime(date) {\r\n      return this.itemFilter.ngayBatDau && date < this.itemFilter.ngayBatDau;\r\n    },\r\n    filterNonNumeric(event) {\r\n      const inputValue = event.target.value;\r\n      const numericRegex = /^[0-9]+$/;\r\n      if (!numericRegex.test(inputValue)) {\r\n        const filteredValue = inputValue.replace(/[^0-9]/g, '');\r\n        this.model.maSoThue = filteredValue;\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    model: {\r\n      deep: true,\r\n      handler(val){\r\n        if (this.model.list != null && this.model.list.length > 0)\r\n        {\r\n          this.isDisabled = true ;\r\n          this.isShow = true;\r\n        }else {\r\n          this.isDisabled = false;\r\n          this.isShow = false\r\n        }\r\n      }\r\n    },\r\n    valueLoaiDichVuYTe: {\r\n      deep: true,\r\n      handler(val) {\r\n        if (!this.isUpdateList)\r\n        {\r\n          this.listThuoc = [];\r\n          this.modelThongTin = thongTinHangHoaModel.baseJson();\r\n          this.valueThuoc = null;\r\n          this.valueDonViTinh = null;\r\n\r\n          if (this.valueLoaiDichVuYTe != null && this.valueLoaiDichVuYTe.thuoc.length > 0 )\r\n          {\r\n            this.listThuoc = this.valueLoaiDichVuYTe.thuoc;\r\n          }\r\n        }else {\r\n          this.isUpdateList = false;\r\n        }\r\n      }\r\n    },\r\n    valueThuoc: {\r\n      deep: true,\r\n      handler(val) {\r\n        if ( this.valueThuoc != null && this.valueThuoc.donViTinhs.length  > 0)\r\n        {\r\n          // this.listDonViTinh = this.valueThuoc.donViTinhs;\r\n          this.modelThongTin.tenHangHoa = this.valueThuoc.name;\r\n          this.modelThongTin.donGia = this.valueThuoc.donGiaBanRa;\r\n          this.modelThongTin.phiTiem = this.valueThuoc.phiTiem;\r\n          this.modelThongTin.phiTuVan = this.valueThuoc.phiTuVan;\r\n          if (this.listDonViTinh.length > 0)\r\n          {\r\n            this.valueDonViTinh = this.listDonViTinh.at(0);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    valueKhachHang:{\r\n      deep:true,\r\n      handler(){\r\n        if(this.valueKhachHang!=null){\r\n          this.$store.dispatch(\"khachHangStore/getById\", this.valueKhachHang).then((res) => {\r\n            if (res.code===0) {\r\n        //      console.log(res)\r\n              this.tempModel = khachHangModel.toJson(res.data);\r\n              this.model.tenDonVi=this.tempModel.tenDonVi\r\n              this.model.tenKhachHang=this.tempModel.tenKhachHang\r\n              this.model.maSoThue=this.tempModel.maSoThue\r\n              this.model.diaChi=this.tempModel.diaChi\r\n              this.model.taiKhoanNganHang=this.tempModel.taiKhoanNganHang\r\n              this.model.khachHang=this.tempModel.tenKhachHang\r\n            } else {\r\n              return;\r\n            }\r\n          });\r\n        }\r\n        else {\r\n          this.model.tenDonVi=null\r\n          this.model.tenKhachHang=null\r\n          this.model.maSoThue=null\r\n          this.model.diaChi=null\r\n          this.model.taiKhoanNganHang=null\r\n          this.model.khachHang=null\r\n        }\r\n\r\n      }\r\n    },\r\n    showDeleteModalNhap (val)\r\n    {\r\n        this.isDelete = true;\r\n    },\r\n    showModal(status) {\r\n      if (status == false) {\r\n        this.model = hoaDonModel.baseJson();\r\n      }else {\r\n        if (this.model.hinhThucThanhToan == null && this.listHinhThuc.length > 0 );\r\n        this.model.hinhThucThanhToan =  this.listHinhThuc.at(0);\r\n      }\r\n    },\r\n    showDeleteModal(val) {\r\n      if (val == false) {\r\n        this.model.id = null;\r\n        this.isDelete = true;\r\n        this.huyModel = deleteModel.baseJson();\r\n      }\r\n    },\r\n    'itemFilter.trangThai': {\r\n      deep: true,\r\n      handler(newvalue,oldvalue){\r\n        this.itemFilter.trangThai=newvalue\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\"/>\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <div class=\"row\">\r\n              <div class=\"mb-3 col-lg-4\">\r\n                <label>Nội dung</label>\r\n                <input\r\n                    v-model=\"itemFilter.content\"\r\n                    size=\"sm\"\r\n                    type=\"text\"\r\n                    name=\"untyped-input\"\r\n                    class=\"form-control\"\r\n                    placeholder=\"Nhập tên khách hàng/ đơn vị/mã số thuế\"\r\n                />\r\n              </div>\r\n              <div class=\"mb-3 col-lg-4\">\r\n                <label>Hình thức thanh toán </label>\r\n                <multiselect v-model=\"itemFilter.hinhThucThanhToan\"\r\n                             label=\"name\"\r\n                             selectLabel=\"Nhấn vào để chọn\"\r\n                             deselectLabel=\"Nhấn vào để xóa\"\r\n                             :options=\"listHinhThuc.map((type) => type.id)\"\r\n                             :custom-label=\"\r\n                              (opt) => listHinhThuc.find((x) => x.id == opt).name\r\n                              \"\r\n                             placeholder=\"Chọn hình thức thanh toán\"\r\n                >\r\n                </multiselect>\r\n              </div>\r\n              <div class=\"mb-3 col-lg-4\">\r\n                <label>Người phát hành </label>\r\n                <multiselect v-model=\"itemFilter.userName\"\r\n                             label=\"fullName\"\r\n                             selectLabel=\"Nhấn vào để chọn\"\r\n                             deselectLabel=\"Nhấn vào để xóa\"\r\n                             :options=\"listNguoiPhatHanh\"\r\n                             placeholder=\"Chọn người phát hành\"\r\n                >\r\n                </multiselect>\r\n              </div>\r\n              <div class=\"mb-3 col-lg-4\">\r\n                <label>Trạng thái hóa đơn</label>\r\n                <multiselect v-model=\"itemFilter.trangThai\"\r\n                             label=\"name\"\r\n                             selectLabel=\"Nhấn vào để chọn\"\r\n                             deselectLabel=\"Nhấn vào để xóa\"\r\n                             :options=\"listTrangThai.map((type) => type.code)\"\r\n                             :custom-label=\"\r\n                              (opt) => listTrangThai.find((x) => x.code == opt).name\r\n                              \"\r\n                             placeholder=\"Chọn trạng thái hóa đơn\"\r\n\r\n                >\r\n                </multiselect>\r\n              </div>\r\n              <div class=\"mb-3 col-lg-4\">\r\n                <label>Thời gian bắt đầu</label>\r\n                <date-picker\r\n                    v-model=\"itemFilter.ngayBatDau\"\r\n                    format=\"DD/MM/YYYY\"\r\n                ></date-picker>\r\n              </div>\r\n              <div class=\"mb-3 col-lg-4\">\r\n                <label>Thời gian kết thúc</label>\r\n                <date-picker\r\n                    v-model=\"itemFilter.ngayKetThuc\"\r\n                    format=\"DD/MM/YYYY\"\r\n                    :disabled-date=\"disabledEndDate\"\r\n                    :disabled-time=\"disabledEndTime\"\r\n                ></date-picker>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-12 text-center\">\r\n                <b-button variant=\"\"\r\n                          class=\"w-10 cs-btn-primary\"\r\n                          style=\"margin-right: 10px ; height: 30px ; width: 100px\"\r\n                          @click=\"handleSearch\"\r\n                          size=\"sm\"\r\n                >\r\n                  <i\r\n                      class=\"bx bx-search font-size-16 align-middle me-2\"\r\n                  ></i>\r\n                  Tìm kiếm\r\n                </b-button>\r\n                <b-button\r\n                    class=\"w-10 cs-btn-primary\"\r\n                    style=\"margin-right: 10px; height: 30px ; width: 100px\"\r\n                    @click=\"handleClear\"\r\n                    size=\"sm\"\r\n                >\r\n                  <i class=\"mdi mdi-replay font-size-16 align-middle me-2\"></i>\r\n                  Làm mới\r\n                </b-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-sm-12\">\r\n                <div class=\"text-sm-end\">\r\n                  <b-modal\r\n                      v-model=\"showModal\"\r\n                      title=\"Thông tin\"\r\n                      title-class=\"text-black font-18\"\r\n                      body-class=\"p-1\"\r\n                      hide-footer\r\n                      centered\r\n                      no-close-on-backdrop\r\n                      size=\"xl\"\r\n                      class=\"modal-xl\"\r\n                  >\r\n                    <template #modal-header=\"{  }\">\r\n                      <div class=\"fw-bolder font-size-18\">THÔNG TIN HOÁ ĐƠN</div>\r\n                      <div class=\"text-end \">\r\n                        <b-button\r\n                            type=\"submit\"\r\n                            variant=\"\"\r\n                            @click=\"handleSubmitList\"\r\n                            class=\"ms-1 cs-btn-primary\"\r\n                        >Thêm\r\n                        </b-button>\r\n                        <b-button\r\n                            type=\"submit\"\r\n                            variant=\"\"\r\n                            @click=\"handleSendReplacementInvoiceFromDataAPI\"\r\n                            class=\"ms-1 cs-btn-primary\"\r\n                        >LẬP HÓA ĐƠN THAY THẾ\r\n                        </b-button>\r\n                        <b-button variant=\"light\"  class=\"ms-1\" @click = \"handleModalClose\">\r\n                          Đóng\r\n                        </b-button>\r\n                      </div>\r\n                    </template>\r\n                    <form  ref=\"formContainer\">\r\n                      <div class=\"row md-0\">\r\n                        <div class=\"col-md-6 md-0\" style=\"margin-bottom: -20px\">\r\n                          <div class=\"table-custom-srollbar-dt\">\r\n                            <b-table\r\n                                class=\"datatables\"\r\n                                :items=\"this.model.list\"\r\n                                :fields=\"fieldsModal\"\r\n                                striped\r\n                                bordered\r\n                                responsive=\"sm\"\r\n                                :current-page=\"currentPage\"\r\n                                :sort-by.sync=\"sortBy\"\r\n                                :sort-desc.sync=\"sortDesc\"\r\n                                :filter=\"filter\"\r\n                                :filter-included-fields=\"filterOn\"\r\n                                ref=\"tblListTable\"\r\n                                primary-key=\"id\"\r\n                            >\r\n                              <template v-slot:cell(donGia)=\"data\">\r\n                                {{formatPrice(data.item.donGia)}}\r\n                              </template>\r\n                              <template v-slot:cell(donViTinh)=\"data\">\r\n                                {{data.item.donViTinh.name}}\r\n                              </template>\r\n                              <template v-slot:cell(process)=\"data\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    size=\"sm\"\r\n                                    class=\"btn btn-outline btn-sm\"\r\n                                    v-on:click=\"handleShowDeleteModalTable(data.item)\">\r\n                                  <i class=\"fas fa-trash-alt text-danger me-1\"></i>\r\n                                </button>\r\n                              </template>\r\n                            </b-table>\r\n                          </div>\r\n                          <div class=\"money\" v-if=\"tongTien > 0\">\r\n                            <span class=\"font-weight-bold font-size-15\"> TỔNG TIỀN : </span>\r\n                            <span class=\"font-weight-bold font-size-15\"> {{formatNumber.FormatNumberShow(this.tongTien)}} VND</span>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"col-md-6 md-0\" style=\"margin-bottom: -20px\">\r\n                          <b-card style=\"background: #d8e7ff\">\r\n                            <div class=\"row mt-0\">\r\n                              <div class=\"col-12\">\r\n                                <div class=\"mb-2\">\r\n                                  <label class=\"text-left mb-0\">Chọn khách hàng</label>\r\n                                  <multiselect\r\n                                      v-model=\"valueKhachHang\"\r\n                                      label=\"tenKhachHang\"\r\n                                      selectLabel=\"Nhấn vào để chọn\"\r\n                                      deselectLabel=\"Nhấn vào để xóa\"\r\n                                      :options=\"listKhachHang.map((type) => type.id)\"\r\n                                      :custom-label=\"\r\n                              (opt) => listKhachHang.find((x) => x.id == opt).tenKhachHangShow\r\n                              \"\r\n                                      placeholder=\"Chọn khách hàng\"\r\n                                  >\r\n                                  </multiselect>\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2\">\r\n                                  <label class=\"text-left mb-0\">Hình thức thanh toán</label>\r\n                                  <multiselect v-model=\"model.hinhThucThanhToan\"\r\n                                               :options=\"listHinhThuc\"\r\n                                               label=\"name\"\r\n                                               selectLabel=\"Nhấn vào để chọn\"\r\n                                               deselectLabel=\"Nhấn vào để xóa\"\r\n                                               track-by=\"id\"\r\n                                               placeholder=\"Chọn hình thức thanh toán\"\r\n                                               :class=\"{\r\n                                                  'is-invalid':\r\n                                                (submitted  && $v.model.hinhThucThanhToan.$error) ,\r\n                                                }\"\r\n                                  >\r\n                                  </multiselect>\r\n                                  <div\r\n                                      v-if=\"submitted && !$v.model.hinhThucThanhToan.required\"\r\n                                      class=\"invalid-feedback\"\r\n                                  >\r\n                                    Vui lòng chọn hình thức thanh toán !\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2\">\r\n                                  <label class=\"text-left mb-0\">Người mua hàng</label>\r\n                                  <!-- <input type=\"hidden\" v-model=\"model.id\" /> -->\r\n                                  <input\r\n                                      id=\"percent\"\r\n                                      v-model=\"model.tenKhachHang\"\r\n                                      type=\"text\"\r\n                                      class=\"form-control\"\r\n                                      :class=\"{\r\n                                        'is-invalid':\r\n                                      (submitted && $v.model.tenKhachHang.$error),\r\n                                      }\"\r\n\r\n                                  />\r\n                                  <div\r\n                                      v-if=\" (submitted && !$v.model.tenKhachHang.required)\"\r\n                                      class=\"invalid-feedback\"\r\n                                  >\r\n                                    Người mua hàng không được trống !\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2\">\r\n                                  <label class=\"text-left mb-0\">Tên đơn vị</label>\r\n                                  <input\r\n                                      id=\"percent\"\r\n                                      v-model=\"model.tenDonVi\"\r\n                                      type=\"text\"\r\n                                      class=\"form-control\"\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2\">\r\n                                  <label class=\"text-left mb-0\">Mã số thuế</label>\r\n                                  <!-- <input type=\"hidden\" v-model=\"model.id\" /> -->\r\n                                  <input\r\n\r\n                                      id=\"percent\"\r\n                                      v-model=\"model.maSoThue\"\r\n                                      type=\"text\"\r\n                                      @input=\"filterNonNumeric\"\r\n                                      class=\"form-control\"\r\n\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2\">\r\n                                  <label class=\"text-left mb-0\">Tài khoản ngân hàng</label>\r\n                                  <input\r\n                                      id=\"percent\"\r\n                                      v-model=\"model.taiKhoanNganHang\"\r\n                                      type=\"text\"\r\n                                      class=\"form-control\"\r\n\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2 \">\r\n                                  <label class=\"text-left mb-0\">Địa chỉ</label>\r\n                                  <input\r\n\r\n                                      id=\"percent\"\r\n                                      v-model=\"model.diaChi\"\r\n                                      type=\"text\"\r\n                                      class=\"form-control\"\r\n                                      :class=\"{\r\n                                        'is-invalid':\r\n                                      submitted && $v.model.diaChi.$error,\r\n                                      }\"\r\n                                  />\r\n                                  <div\r\n                                      v-if=\"submitted && !$v.model.diaChi.required\"\r\n                                      class=\"invalid-feedback\"\r\n                                  >\r\n                                    Địa chỉ không được trống !\r\n                                  </div>\r\n\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2\">\r\n                                  <label class=\"text-left mb-0\">Loại dịch vụ y tế</label>\r\n                                  <multiselect v-model=\"valueLoaiDichVuYTe\"\r\n                                               :options=\"listLoaiDichVu\"\r\n                                               label=\"name\"\r\n                                               selectLabel=\"Nhấn vào để chọn\"\r\n                                               deselectLabel=\"Nhấn vào để xóa\"\r\n                                               track-by=\"id\"\r\n                                               placeholder=\"Chọn loại dịch vụ y tế\"\r\n                                               :class=\"{\r\n                                                 'is-invalid':\r\n                                                 submitted && $v.valueLoaiDichVuYTe.$error,\r\n                                         }\"\r\n\r\n                                  >\r\n\r\n                                  </multiselect>\r\n                                  <div\r\n                                      v-if=\"submitted && !$v.valueLoaiDichVuYTe.required\"\r\n                                      class=\"invalid-feedback\"\r\n                                  >\r\n                                    Loại dịch vụ y tế không được để trống.\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2 \">\r\n                                  <label class=\"text-left mb-0\">Thuốc - Dịch vụ y tế</label>\r\n                                  <multiselect v-model=\"valueThuoc\"\r\n                                               :options=\"listThuoc\"\r\n                                               label=\"name\"\r\n                                               selectLabel=\"Nhấn vào để chọn\"\r\n                                               deselectLabel=\"Nhấn vào để xóa\"\r\n                                               track-by=\"id\"\r\n                                               placeholder=\"Chọn thuốc - dịch vụ y tế\"\r\n                                               :class=\"{\r\n                                                 'is-invalid':\r\n                                                 submitted && $v.valueThuoc.$error,\r\n                                         }\"\r\n\r\n                                  >\r\n                                  </multiselect>\r\n                                  <div\r\n                                      v-if=\"submitted && !$v.valueThuoc.required\"\r\n                                      class=\"invalid-feedback\"\r\n                                  >\r\n                                    Thuốc - Dịch vụ y tế không được để trống.\r\n                                  </div>\r\n\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2 \">\r\n                                  <label class=\"text-left mb-0\">Đơn vị tính</label>\r\n                                  <multiselect v-model=\"valueDonViTinh\"\r\n                                               :options=\"listDonViTinh\"\r\n                                               label=\"name\"\r\n                                               selectLabel=\"Nhấn vào để chọn\"\r\n                                               deselectLabel=\"Nhấn vào để xóa\"\r\n                                               track-by=\"id\"\r\n                                               placeholder=\"Chọn đơn vị tính\"\r\n                                               :class=\"{\r\n                                                 'is-invalid':\r\n                                                 submitted && $v.valueDonViTinh.$error,\r\n                                         }\"\r\n                                  >\r\n                                  </multiselect>\r\n                                  <div\r\n                                      v-if=\"submitted && !$v.valueDonViTinh.required\"\r\n                                      class=\"invalid-feedback\"\r\n                                  >\r\n                                    Đơn vị tính không được để trống.\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2 \">\r\n                                  <label class=\"text-left mb-0\">Tên hàng hoá</label>\r\n                                  <input\r\n                                      id=\"percent\"\r\n                                      v-model=\"modelThongTin.tenHangHoa\"\r\n                                      type=\"text\"\r\n                                      class=\"form-control\"\r\n                                      :class=\"{\r\n                                          'is-invalid':\r\n                                        submitted && $v.modelThongTin.tenHangHoa.$error,\r\n                                        }\"\r\n                                  />\r\n                                  <div\r\n                                      v-if=\"submitted && !$v.modelThongTin.tenHangHoa.required\"\r\n                                      class=\"invalid-feedback\"\r\n                                  >\r\n                                    Tên hàng hóa không được trống !\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2 \">\r\n                                  <label class=\"text-left mb-0\">Đơn giá</label>\r\n                                  <input\r\n                                      v-model.lazy=\"modelThongTin.donGia\"\r\n                                      v-money=\"money\"\r\n                                      class=\"form-control\"\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                              <div class=\"col-6\">\r\n                                <div class=\"mb-2 \">\r\n                                  <label class=\"text-left mb-0\">Số lượng</label>\r\n                                  <input\r\n                                      id=\"percent\"\r\n                                      v-model=\"modelThongTin.soLuong\"\r\n                                      type=\"number\"\r\n                                      class=\"form-control\"\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </b-card>\r\n                        </div>\r\n                      </div>\r\n                    </form>\r\n                  </b-modal>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-12\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-sm-12 col-md-6\">\r\n                    <div class=\"col-sm-12 d-flex justify-content-left align-items-center\">\r\n                      <div class=\"m-1\" style=\"display: flex; justify-content: left; align-items: center;\">\r\n                        <div class=\"me-1\">Hiển thị</div>\r\n                        <b-form-select\r\n                            class=\"form-select form-select-sm\"\r\n                            v-model=\"perPage\"\r\n                            size=\"sm\"\r\n                            :options=\"pageOptions\"\r\n                            style=\"width: 70px\"\r\n                        ></b-form-select\r\n                        >&nbsp;\r\n                        <div style=\"width: 100px\"> dòng</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"table-responsive mb-0\">\r\n                  <b-table\r\n                      class=\"datatables\"\r\n                      :items=\"myProvider\"\r\n                      :fields=\"fields\"\r\n                      striped\r\n                      bordered\r\n                      responsive=\"sm\"\r\n                      :per-page=\"perPage\"\r\n                      :current-page=\"currentPage\"\r\n                      :sort-by.sync=\"sortBy\"\r\n                      :sort-desc.sync=\"sortDesc\"\r\n                      :filter=\"filter\"\r\n                      :filter-included-fields=\"filterOn\"\r\n                      ref=\"tblList\"\r\n                      primary-key=\"id\"\r\n                  >\r\n                    <template v-slot:cell(STT)=\"data\">\r\n                      {{ data.index + ((currentPage - 1) * perPage) + 1 }}\r\n                    </template>\r\n                    <template v-slot:cell(chuyenDoi)=\"data\">\r\n                      <div>\r\n                        <input class=\"form-check-input\" type=\"checkbox\" v-model=\"data.item.chuyenDoi\" disabled=\"true\">\r\n                      </div>\r\n                    </template>\r\n                    <template v-slot:cell(statusName)=\"data\">\r\n                      <div >\r\n                         <span\r\n                             class=\"badge rounded-pill font-size-12 fw-bolder\"\r\n                             :class=\"{\r\n                             'badge-soft-dark': data.item.statusCode === 'DAXOA',\r\n                            'badge-soft-primary': data.item.statusCode === 'NHAP',\r\n                            'badge-soft-success': data.item.statusCode === 'DAPHATHANH',\r\n                             'badge-soft-danger': data.item.statusCode === 'THAYTHE',\r\n                          }\"\r\n                         >{{ data.item.statusName }}</span>\r\n                      </div>\r\n                    </template>\r\n                    <template v-slot:cell(process)=\"data\">\r\n                        <button\r\n                            type=\"button\"\r\n                                 size=\"sm\"\r\n                                 class=\"btn btn-outline btn-sm\"\r\n                                v-on:click=\"handleInvoiceFromData(data.item.id)\">\r\n                          <i class=\"fas fa-cloud-download-alt fa-lg text-sale me-1\"></i>\r\n                        </button>\r\n                    </template>\r\n\r\n                  </b-table>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <b-col>\r\n                    <div>Hiển thị {{ numberOfElement }} trên tổng số {{ totalRows }} dòng</div>\r\n                  </b-col>\r\n                  <div class=\"col\">\r\n                    <div\r\n                        class=\"dataTables_paginate paging_simple_numbers float-end\">\r\n                      <ul class=\"pagination pagination-rounded mb-0\">\r\n                        <!-- pagination -->\r\n                        <b-pagination\r\n                            v-model=\"currentPage\"\r\n                            :total-rows=\"totalRows\"\r\n                            :per-page=\"perPage\"\r\n                        ></b-pagination>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <b-modal\r\n                    v-model=\"showPhatHanhModal\"\r\n                    centered\r\n                    title=\"Phát hành hóa đơn\"\r\n                    title-class=\"font-18\"\r\n                    no-close-on-backdrop\r\n                    hide-header-close\r\n                    size=\"lg\"\r\n                >\r\n                  <p>\r\n                    Bạn chắc chắn muốn phát hành hóa đơn này?\r\n                  </p>\r\n                  <template #modal-footer>\r\n                    <button v-b-modal.modal-close_visit\r\n                            class=\"btn btn-outline-info m-1\"\r\n                            v-show=\"isSend\"\r\n                            v-on:click=\"handleClosePhatHanh\">\r\n                      Đóng\r\n                    </button>\r\n                    <button v-b-modal.modal-close_visit\r\n                            class=\"btn btn-warning btn m-1\"\r\n                            v-show=\"isSend\"\r\n                            v-on:click=\"handleSendInvoiceFromDataAPI\">\r\n                      Phát hành\r\n                    </button>\r\n                  </template>\r\n                </b-modal>\r\n                <b-modal\r\n                    v-model=\"showDeleteModal\"\r\n                    centered\r\n                    title=\"Hủy hóa đơn\"\r\n                    title-class=\"font-18\"\r\n                    hide-header-close\r\n                    no-close-on-backdrop\r\n                >\r\n                  <div class=\"col-12\">\r\n                    <div class=\"mb-2 \">\r\n                      <label class=\"text-left mb-0\">Tên văn bản thỏa thuận hủy hóa đơn</label>\r\n                      <input\r\n                          type=\"text\"\r\n                          v-model=\"huyModel.vanban\"\r\n                          class=\"form-control\"\r\n                          :class=\"{\r\n                                        'is-invalid':\r\n                                      submittedHuy && $v.huyModel.vanban.$error,\r\n                                      }\"\r\n                      />\r\n                      <div\r\n                          v-if=\"submittedHuy && !$v.huyModel.vanban.required\"\r\n                          class=\"invalid-feedback\"\r\n                      >\r\n                        Văn bản thỏa thuận hủy hóa đơn không được trống !\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-12\">\r\n                    <div class=\"mb-2 \">\r\n                      <label class=\"text-left mb-0\">Lý do hủy hóa đơn</label>\r\n                      <input\r\n                          id=\"percent\"\r\n                          type=\"text\"\r\n                          v-model=\"huyModel.lydo\"\r\n                          class=\"form-control\"\r\n                          :class=\"{\r\n                                        'is-invalid':\r\n                                      submittedHuy && $v.huyModel.lydo.$error,\r\n                                      }\"\r\n                      />\r\n                      <div\r\n                          v-if=\"submittedHuy && !$v.huyModel.lydo.required\"\r\n                          class=\"invalid-feedback\"\r\n                      >\r\n                        Lý do hủy hóa đơn không được trống !\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <template #modal-footer>\r\n                    <button v-b-modal.modal-close_visit\r\n                            class=\"btn btn-outline-info m-1\"\r\n                            v-show=\"isDelete\"\r\n                            v-on:click=\"showDeleteModal = false\">\r\n                      Đóng\r\n                    </button>\r\n                    <button\r\n                        v-show=\"isDelete\"\r\n                        v-b-modal.modal-close_visit\r\n                            class=\"btn btn-danger btn m-1\"\r\n                            v-on:click=\"handleDeleteAPI\">\r\n                      Xóa\r\n                    </button>\r\n                  </template>\r\n                </b-modal>\r\n                <b-modal\r\n                    v-model=\"showDeleteModalNhap\"\r\n                    centered\r\n                    title=\"Xóa hóa đơn nháp\"\r\n                    title-class=\"font-18\"\r\n                    no-close-on-backdrop\r\n                >\r\n                  <p>\r\n                  Dữ liệu xóa sẽ không được phục hồi!\r\n                </p>\r\n                  <template #modal-footer>\r\n                    <button v-b-modal.modal-close_visit\r\n                            v-show=\"isDelete\"\r\n                            class=\"btn btn-outline-info m-1\"\r\n                            v-on:click=\"showDeleteModal = false\">\r\n                      Đóng\r\n                    </button>\r\n                    <button\r\n                        v-show=\"isDelete\"\r\n                        v-b-modal.modal-close_visit\r\n                        class=\"btn btn-danger btn m-1\"\r\n                        v-on:click=\"handleDeleteNhapAPI\">\r\n                      Xóa\r\n                    </button>\r\n                  </template>\r\n                </b-modal>\r\n                <b-modal\r\n                    v-model=\"showDeleteTableModal\"\r\n                    centered\r\n                    title=\"Xóa dữ liệu hóa đơn\"\r\n                    title-class=\"font-18\"\r\n                    no-close-on-backdrop\r\n                >\r\n                  <p>\r\n                    Dữ liệu hóa đơn xóa sẽ không được phục hồi!\r\n                  </p>\r\n                  <template #modal-footer>\r\n                    <button v-b-modal.modal-close_visit\r\n                            class=\"btn btn-outline-info m-1\"\r\n                            v-on:click=\"handleClose\">\r\n                      Đóng\r\n                    </button>\r\n                    <button v-b-modal.modal-close_visit\r\n                            class=\"btn btn-danger btn m-1\"\r\n                            v-on:click=\"handleDeleteModal\">\r\n                      Xóa\r\n                    </button>\r\n                  </template>\r\n                </b-modal>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Layout>\r\n</template>\r\n<style>\r\n\r\n.modal-dialog {\r\n  max-width: 97%;\r\n  height: 100vh;\r\n  display: flex;\r\n}\r\n\r\n.table-custom-srollbar-dt\r\n{\r\n  height: 460px;\r\n  background: #ffffff;\r\n  width: 100%;\r\n  overflow: auto;\r\n}\r\n\r\n</style>\r\n"]}]}