{"remainingRequest":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\src\\pages\\user\\ChangePass.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\src\\pages\\user\\ChangePass.vue","mtime":1704440180000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704332086000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\babel-loader\\lib\\index.js","mtime":1704440412000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704332086000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\vue-loader\\lib\\index.js","mtime":1704440418000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgTGF5b3V0IGZyb20gIi4uLy4uL2xheW91dHMvbWFpbiI7DQppbXBvcnQgUGFnZUhlYWRlciBmcm9tICJAL2NvbXBvbmVudHMvcGFnZS1oZWFkZXIiOw0KaW1wb3J0IGFwcENvbmZpZyBmcm9tICJAL2FwcC5jb25maWciOw0KaW1wb3J0IHtub3RpZnlNb2RlbH0gZnJvbSAiQC9tb2RlbHMvbm90aWZ5TW9kZWwiOw0KaW1wb3J0IHt1c2VyTW9kZWx9IGZyb20gIkAvbW9kZWxzL3VzZXJNb2RlbCI7DQppbXBvcnQge3JlcXVpcmVkLHNhbWVBc30gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBwYWdlOiB7DQogICAgdGl0bGU6ICLEkOG7lWkgbeG6rXQga2jhuql1IiwNCiAgICBtZXRhOiBbe25hbWU6ICJkZXNjcmlwdGlvbiIsIGNvbnRlbnQ6IGFwcENvbmZpZy5kZXNjcmlwdGlvbn1dLA0KICB9LA0KICBjb21wb25lbnRzOiB7TGF5b3V0LCBQYWdlSGVhZGVyfSwNCiAgZGF0YSgpew0KICAgIHJldHVybiB7DQogICAgICB0aXRsZTogIsSQ4buVaSBt4bqtdCBraOG6qXUiLA0KICAgICAgbW9kZWxwYXNzOnsNCiAgICAgICAgcGFzc3dvcmQ6bnVsbCwNCiAgICAgICAgbmV3UGFzczpudWxsLA0KICAgICAgICBjb25maXJtUGFzczpudWxsLA0KICAgICAgICB1c2VyTmFtZTpudWxsLA0KICAgICAgICBpZDpudWxsDQogICAgICB9LA0KICAgICAgaXRlbXM6IFsNCiAgICAgICAgew0KICAgICAgICAgIHRleHQ6ICLEkOG7lWkgbeG6rXQga2jhuql1IiwNCiAgICAgICAgICAvL2hyZWY6ICIvbmhvbS1xdWFuLWx5LWR1LWFuIiwNCiAgICAgICAgICAgYWN0aXZlOiB0cnVlLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogIkRhbmggc8OhY2giLA0KICAgICAgICAgIGFjdGl2ZTogdHJ1ZSwNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIGRhdGE6IFtdLA0KICAgICAgc3VibWl0dGVkOiBmYWxzZSwNCiAgICAgIC8vbW9kZWw6IHVzZXJNb2RlbC5iYXNlSnNvbigpLA0KICAgIH0NCiAgfSwNCiAgdmFsaWRhdGlvbnM6IHsNCiAgICBtb2RlbHBhc3M6IHsNCiAgICAgIHBhc3N3b3JkOiB7IHJlcXVpcmVkIH0sDQogICAgICBuZXdQYXNzOntyZXF1aXJlZH0sDQogICAgICBjb25maXJtUGFzczogeyByZXF1aXJlZCwgc2FtZUFzUGFzc3dvcmQ6IHNhbWVBcygnbmV3UGFzcycpIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy90aGlzLmdldHN0b3JlKCk7DQogICAgdGhpcy5nZXRJRCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgaGFuZGxlRGV0YWlsKGlkKSB7DQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgidXNlclN0b3JlL2dldEJ5SWQiLCBpZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMucmVzdWx0Q29kZSA9PT0gMCkgew0KICAgICAgICAgIHRoaXMubW9kZWwgPSB1c2VyTW9kZWwuZnJvbUpzb24ocmVzLmRhdGEpOw0KICAgICAgICAgIHRoaXMuc2hvd0RldGFpbCA9IHRydWU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNuYWNrQmFyU3RvcmUvYWRkTm90aWZ5Iiwgbm90aWZ5TW9kZWwuYWRkTWVzc2FnZShyZXMpKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVTdWJtaXQoZSkgew0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOw0KICAgICAgdGhpcy4kdi4kdG91Y2goKQ0KICAgICAgaWYgKHRoaXMuJHYubW9kZWxwYXNzLiRpbnZhbGlkKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCJMT0cgSU5WQUxJRCAiKQ0KICAgICAgICByZXR1cm47DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygiTE9HIEVMU0UgTsOIICIpDQogICAgICAgIGxldCBsb2FkZXIgPSB0aGlzLiRsb2FkaW5nLnNob3coew0KICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy4kcmVmcy5mb3JtQ29udGFpbmVyLA0KICAgICAgICB9KTsNCiAgICAgICAgaWYgKA0KICAgICAgICAgICAgdGhpcy5tb2RlbHBhc3MuaWQgIT0gMCAmJg0KICAgICAgICAgICAgdGhpcy5tb2RlbHBhc3MuaWQgIT0gbnVsbCAmJg0KICAgICAgICAgICAgdGhpcy5tb2RlbHBhc3MuaWQNCiAgICAgICAgKQ0KICAgICAgICB7DQogICAgICAgICAgY29uc29sZS5sb2coIkxPRyBWw4BPIENIQU5HRSBQQVNTV09SRCIpDQogICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVzZXJTdG9yZS9jaGFuZ2VQYXNzd29yZCIsIHRoaXMubW9kZWxwYXNzKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXMucmVzdWx0Q29kZSA9PT0gMCkgew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTE9HIFNVQ0NFU1MgIikNCiAgICAgICAgICAgICB0aGlzLmdldElEKCk7DQogICAgICAgICAgICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm1vZGVscGFzcy5uZXdQYXNzID1udWxsOw0KICAgICAgICAgICAgdGhpcy5tb2RlbHBhc3MucGFzc3dvcmQ9bnVsbDsNCiAgICAgICAgICAgIHRoaXMubW9kZWxwYXNzLmNvbmZpcm1QYXNzPW51bGw7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic25hY2tCYXJTdG9yZS9hZGROb3RpZnkiLCBub3RpZnlNb2RlbC5hZGRNZXNzYWdlKHJlcykpOw0KICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNuYWNrQmFyU3RvcmUvYWRkTm90aWZ5Iiwgbm90aWZ5TW9kZWwuYWRkTWVzc2FnZShyZXMpKQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICAgIGxvYWRlci5oaWRlKCk7DQogICAgICB9DQogICAgICB0aGlzLnN1Ym1pdHRlZCA9IGZhbHNlOw0KICAgIH0sDQogICAgLy8gZ2V0c3RvcmUoKXsNCiAgICAvLyAgIGNvbnN0IGdpYXRyaT0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGgtdXNlcicpOw0KICAgIC8vICAgY29uc29sZS5sb2coJ1N0cm9yZScsIEpTT04ucGFyc2UoZ2lhdHJpKT8udXNlcj8udXNlck5hbWUpOw0KICAgIC8vICAgcmV0dXJuIEpTT04ucGFyc2UoZ2lhdHJpKT8udXNlcj8udXNlck5hbWU7DQogICAgLy8gfSwNCiAgICBhc3luYyBnZXRJRCgpew0KICAgICAgY29uc29sZS5sb2coIkxPRyA6IFbDgE8gR0VUIElEICIpDQogICAgICBjb25zdCBpZHN0b3JlPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aC11c2VyJyk7DQogICAgICAvL2NvbnNvbGUubG9nKCdTdHJvcmVJRCcsIEpTT04ucGFyc2UoaWRzdG9yZSk/LnVzZXI/LmlkKTsNCiAgICAgIHRoaXMubW9kZWxwYXNzLnVzZXJOYW1lPUpTT04ucGFyc2UoaWRzdG9yZSk/LnVzZXI/LnVzZXJOYW1lOw0KICAgICAgdGhpcy5tb2RlbHBhc3MuaWQ9SlNPTi5wYXJzZShpZHN0b3JlKT8udXNlcj8uaWQ7DQogICAgICByZXR1cm4gSlNPTi5wYXJzZShpZHN0b3JlKTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["ChangePass.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangePass.vue","sourceRoot":"src/pages/user","sourcesContent":["<script>\r\nimport Layout from \"../../layouts/main\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport appConfig from \"@/app.config\";\r\nimport {notifyModel} from \"@/models/notifyModel\";\r\nimport {userModel} from \"@/models/userModel\";\r\nimport {required,sameAs} from \"vuelidate/lib/validators\";\r\n\r\nexport default {\r\n  page: {\r\n    title: \"Đổi mật khẩu\",\r\n    meta: [{name: \"description\", content: appConfig.description}],\r\n  },\r\n  components: {Layout, PageHeader},\r\n  data(){\r\n    return {\r\n      title: \"Đổi mật khẩu\",\r\n      modelpass:{\r\n        password:null,\r\n        newPass:null,\r\n        confirmPass:null,\r\n        userName:null,\r\n        id:null\r\n      },\r\n      items: [\r\n        {\r\n          text: \"Đổi mật khẩu\",\r\n          //href: \"/nhom-quan-ly-du-an\",\r\n           active: true,\r\n        },\r\n        {\r\n          text: \"Danh sách\",\r\n          active: true,\r\n        }\r\n      ],\r\n      data: [],\r\n      submitted: false,\r\n      //model: userModel.baseJson(),\r\n    }\r\n  },\r\n  validations: {\r\n    modelpass: {\r\n      password: { required },\r\n      newPass:{required},\r\n      confirmPass: { required, sameAsPassword: sameAs('newPass') }\r\n    }\r\n  },\r\n  created() {\r\n    //this.getstore();\r\n    this.getID();\r\n  },\r\n  methods: {\r\n    async handleDetail(id) {\r\n      await this.$store.dispatch(\"userStore/getById\", id).then((res) => {\r\n        if (res.resultCode === 0) {\r\n          this.model = userModel.fromJson(res.data);\r\n          this.showDetail = true;\r\n        } else {\r\n          this.$store.dispatch(\"snackBarStore/addNotify\", notifyModel.addMessage(res));\r\n        }\r\n      });\r\n    },\r\n    async handleSubmit(e) {\r\n      e.preventDefault();\r\n      this.submitted = true;\r\n      this.$v.$touch()\r\n      if (this.$v.modelpass.$invalid) {\r\n        console.log(\"LOG INVALID \")\r\n        return;\r\n      } else {\r\n        console.log(\"LOG ELSE NÈ \")\r\n        let loader = this.$loading.show({\r\n          container: this.$refs.formContainer,\r\n        });\r\n        if (\r\n            this.modelpass.id != 0 &&\r\n            this.modelpass.id != null &&\r\n            this.modelpass.id\r\n        )\r\n        {\r\n          console.log(\"LOG VÀO CHANGE PASSWORD\")\r\n          await this.$store.dispatch(\"userStore/changePassword\", this.modelpass).then((res) => {\r\n            if (res.resultCode === 0) {\r\n              console.log(\"LOG SUCCESS \")\r\n             this.getID();\r\n              this.showModal = false;\r\n            }\r\n            this.modelpass.newPass =null;\r\n            this.modelpass.password=null;\r\n            this.modelpass.confirmPass=null;\r\n            this.$store.dispatch(\"snackBarStore/addNotify\", notifyModel.addMessage(res));\r\n            // this.$store.dispatch(\"snackBarStore/addNotify\", notifyModel.addMessage(res))\r\n          });\r\n        }\r\n        loader.hide();\r\n      }\r\n      this.submitted = false;\r\n    },\r\n    // getstore(){\r\n    //   const giatri= localStorage.getItem('auth-user');\r\n    //   console.log('Strore', JSON.parse(giatri)?.user?.userName);\r\n    //   return JSON.parse(giatri)?.user?.userName;\r\n    // },\r\n    async getID(){\r\n      console.log(\"LOG : VÀO GET ID \")\r\n      const idstore= localStorage.getItem('auth-user');\r\n      //console.log('StroreID', JSON.parse(idstore)?.user?.id);\r\n      this.modelpass.userName=JSON.parse(idstore)?.user?.userName;\r\n      this.modelpass.id=JSON.parse(idstore)?.user?.id;\r\n      return JSON.parse(idstore);\r\n    }\r\n  }\r\n}\r\n</script>\r\n<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n    <div class=\"row\">\r\n      <div class=\"col-xl-6\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h4 class=\"card-title\">Thông tin tài khoản</h4>\r\n            <form-wizard shape=\"tab\" color=\"#556ee6\">\r\n              <tab-content icon=\"mdi mdi-account-circle\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <div class=\"form-group row mb-3\">\r\n                      <label class=\"col-md-3 col-form-label\" for=\"name\"\r\n                      >Tên tài khoản</label\r\n                      >\r\n                      <div class=\"col-md-9\">\r\n                        <input type=\"hidden\" v-model=\"modelpass.id\"/>\r\n                        <input\r\n                            id=\"name\"\r\n                            type=\"text\"\r\n                            class=\"form-control\"\r\n                            v-model= \"modelpass.userName\"\r\n                            disabled\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"form-group row mb-3\">\r\n                      <label class=\"col-md-3 col-form-label\" for=\"pwd\"\r\n                      >Mật khẩu hiện tại</label\r\n                      >\r\n                      <div class=\"col-md-9\">\r\n                        <input type=\"hidden\" v-model=\"modelpass.id\"/>\r\n                        <input\r\n                            v-model=\"modelpass.password\"\r\n                            id=\"pwd\"\r\n                            type=\"password\"\r\n                            name=\"pwd\"\r\n                            class=\"form-control\"\r\n                            placeholder=\"Nhập mật khẩu hiện tại\"\r\n                            :class=\"{\r\n                                'is-invalid':\r\n                                  submitted && $v.modelpass.password.$error,\r\n                              }\"\r\n                        />\r\n                        <div\r\n                            v-if=\"submitted && !$v.modelpass.password.required\"\r\n                            class=\"invalid-feedback\"\r\n                        >\r\n                          Mật khẩu hiện tại không được để trống.\r\n                        </div>\r\n                      </div>\r\n\r\n                    </div>\r\n\r\n\r\n                    <div class=\"form-group row mb-3\">\r\n                      <label class=\"col-md-3 col-form-label\" for=\"pwdnew\"\r\n                      >Mật khẩu mới</label\r\n                      >\r\n                      <div class=\"col-md-9\">\r\n                        <input type=\"hidden\" v-model=\"modelpass.id\"/>\r\n                        <input\r\n                            v-model=\"modelpass.newPass\"\r\n                            id=\"pwdnew\"\r\n                            type=\"password\"\r\n                            class=\"form-control\"\r\n                            placeholder=\"Nhập mật khẩu mới\"\r\n                            :class=\"{\r\n                                'is-invalid':\r\n                                  submitted && $v.modelpass.newPass.$error,\r\n                              }\"\r\n                        />\r\n                        <div\r\n                            v-if=\"submitted && !$v.modelpass.newPass.required\"\r\n                            class=\"invalid-feedback\"\r\n                        >\r\n                          Mật khẩu mới không được để trống.\r\n                        </div>\r\n                      </div>\r\n\r\n                    </div>\r\n\r\n                    <div class=\"form-group row mb-3\">\r\n                      <label class=\"col-md-3 col-form-label\" for=\"confirmpwd\"\r\n                      >Nhập lại mật khẩu</label\r\n                      >\r\n                      <div class=\"col-md-9\">\r\n                        <input type=\"hidden\" v-model=\"modelpass.id\"/>\r\n                        <input\r\n                            v-model=\"modelpass.confirmPass\"\r\n                            id=\"confirmpwd\"\r\n                            type=\"password\"\r\n                            class=\"form-control\"\r\n                            placeholder=\"Nhập lại mật khẩu\"\r\n                            :class=\"{\r\n                                'is-invalid':\r\n                                  submitted && $v.modelpass.confirmPass.$error,\r\n                              }\"\r\n                        />\r\n                        <div\r\n                            v-if=\"submitted && !$v.modelpass.confirmPass.required\"\r\n                            class=\"invalid-feedback\"\r\n                        >\r\n                          Vui lòng nhập lại mật khẩu.\r\n                        </div>\r\n                        <div\r\n                            v-if=\"modelpass.confirmPass && !$v.modelpass.confirmPass.sameAsPassword\"\r\n                            class=\"invalid-feedback\"\r\n                        >\r\n                          Nhập lại mật khẩu và mật khẩu mới không trùng khớp.\r\n                        </div>\r\n                      </div>\r\n\r\n                    </div>\r\n\r\n                  </div>\r\n                  <!-- end col -->\r\n                </div>\r\n                <b-button variant=\"success\" class=\"text-right pt-1 mt-2\" style=\"float: right\" size=\"sm\" type=\"submit\"  @click=\"handleSubmit\">\r\n                  <i\r\n                      class=\"bx bx-check-double font-size-16 align-middle me-2\"\r\n                  ></i>\r\n                  Đổi mật khẩu\r\n                </b-button>\r\n                <!-- end row -->\r\n              </tab-content>\r\n\r\n            </form-wizard>\r\n          </div>\r\n          <!-- end card-body -->\r\n        </div>\r\n        <!-- end card -->\r\n      </div>\r\n      <!-- end col -->\r\n    </div>\r\n  </Layout>\r\n</template>\r\n"]}]}