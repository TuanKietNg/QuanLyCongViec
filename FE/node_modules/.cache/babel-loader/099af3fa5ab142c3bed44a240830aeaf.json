{"remainingRequest":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\babel-loader\\lib\\index.js!D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\src\\helpers\\authservice\\user.service.js","dependencies":[{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\src\\helpers\\authservice\\user.service.js","mtime":1704440180000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\babel.config.js","mtime":1704440180000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704332086000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\babel-loader\\lib\\index.js","mtime":1704440412000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1704332098000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgeyBhdXRoSGVhZGVyIH0gZnJvbSAnLi9hdXRoLWhlYWRlcic7CmV4cG9ydCB2YXIgdXNlclNlcnZpY2UgPSB7CiAgbG9naW46IGxvZ2luLAogIGxvZ291dDogbG9nb3V0LAogIHJlZ2lzdGVyOiByZWdpc3RlciwKICBnZXRBbGw6IGdldEFsbAp9OwpmdW5jdGlvbiBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHsKICB2YXIgcmVxdWVzdE9wdGlvbnMgPSB7CiAgICBtZXRob2Q6ICdQT1NUJywKICAgIGhlYWRlcnM6IHsKICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfSwKICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgZW1haWw6IGVtYWlsLAogICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgIH0pCiAgfTsKICByZXR1cm4gZmV0Y2goIi91c2Vycy9hdXRoZW50aWNhdGUiLCByZXF1ZXN0T3B0aW9ucykudGhlbihoYW5kbGVSZXNwb25zZSkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgLy8gbG9naW4gc3VjY2Vzc2Z1bCBpZiB0aGVyZSdzIGEgand0IHRva2VuIGluIHRoZSByZXNwb25zZQogICAgaWYgKHVzZXIudG9rZW4pIHsKICAgICAgLy8gc3RvcmUgdXNlciBkZXRhaWxzIGFuZCBqd3QgdG9rZW4gaW4gbG9jYWwgc3RvcmFnZSB0byBrZWVwIHVzZXIgbG9nZ2VkIGluIGJldHdlZW4gcGFnZSByZWZyZXNoZXMKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICB9CiAgICByZXR1cm4gdXNlcjsKICB9KTsKfQpmdW5jdGlvbiBsb2dvdXQoKSB7CiAgLy8gcmVtb3ZlIHVzZXIgZnJvbSBsb2NhbCBzdG9yYWdlIHRvIGxvZyB1c2VyIG91dAogIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7Cn0KZnVuY3Rpb24gcmVnaXN0ZXIodXNlcikgewogIHZhciByZXF1ZXN0T3B0aW9ucyA9IHsKICAgIG1ldGhvZDogJ1BPU1QnLAogICAgaGVhZGVyczogewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9LAogICAgYm9keTogSlNPTi5zdHJpbmdpZnkodXNlcikKICB9OwogIHJldHVybiBmZXRjaCgiL3VzZXJzL3JlZ2lzdGVyIiwgcmVxdWVzdE9wdGlvbnMpLnRoZW4oaGFuZGxlUmVzcG9uc2UpOwp9CmZ1bmN0aW9uIGdldEFsbCgpIHsKICB2YXIgcmVxdWVzdE9wdGlvbnMgPSB7CiAgICBtZXRob2Q6ICdHRVQnLAogICAgaGVhZGVyczogYXV0aEhlYWRlcigpCiAgfTsKICByZXR1cm4gZmV0Y2goIi91c2VycyIsIHJlcXVlc3RPcHRpb25zKS50aGVuKGhhbmRsZVJlc3BvbnNlKTsKfQpmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXNwb25zZSkgewogIHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbihmdW5jdGlvbiAodGV4dCkgewogICAgdmFyIGRhdGEgPSB0ZXh0ICYmIEpTT04ucGFyc2UodGV4dCk7CiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgIC8vIGF1dG8gbG9nb3V0IGlmIDQwMSByZXNwb25zZSByZXR1cm5lZCBmcm9tIGFwaQogICAgICAgIGxvZ291dCgpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgICAgfQogICAgICB2YXIgZXJyb3IgPSBkYXRhICYmIGRhdGEubWVzc2FnZSB8fCByZXNwb25zZS5zdGF0dXNUZXh0OwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfQogICAgcmV0dXJuIGRhdGE7CiAgfSk7Cn0="},{"version":3,"names":["authHeader","userService","login","logout","register","getAll","email","password","requestOptions","method","headers","body","JSON","stringify","fetch","then","handleResponse","user","token","localStorage","setItem","removeItem","response","text","data","parse","ok","status","location","reload","error","message","statusText","Promise","reject"],"sources":["D:/TTTN2023/Code/QuanLyCongViec/FE/src/helpers/authservice/user.service.js"],"sourcesContent":["import { authHeader } from './auth-header';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n};\r\n\r\nfunction login(email, password) {\r\n\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password })\r\n    };\r\n\r\n    return fetch(`/users/authenticate`, requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            // login successful if there's a jwt token in the response\r\n            if (user.token) {\r\n                // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n                localStorage.setItem('user', JSON.stringify(user));\r\n            }\r\n            return user;\r\n        });\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n    return fetch(`/users/register`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction getAll() {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n    return fetch(`/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401) {\r\n                // auto logout if 401 response returned from api\r\n                logout();\r\n                location.reload(true);\r\n            }\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n        return data;\r\n    });\r\n}\r\n"],"mappings":";;;AAAA,SAASA,UAAU,QAAQ,eAAe;AAE1C,OAAO,IAAMC,WAAW,GAAG;EACvBC,KAAK,EAALA,KAAK;EACLC,MAAM,EAANA,MAAM;EACNC,QAAQ,EAARA,QAAQ;EACRC,MAAM,EAANA;AACJ,CAAC;AAED,SAASH,KAAKA,CAACI,KAAK,EAAEC,QAAQ,EAAE;EAE5B,IAAMC,cAAc,GAAG;IACnBC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEP,KAAK,EAALA,KAAK;MAAEC,QAAQ,EAARA;IAAS,CAAC;EAC5C,CAAC;EAED,OAAOO,KAAK,wBAAwBN,cAAc,CAAC,CAC9CO,IAAI,CAACC,cAAc,CAAC,CACpBD,IAAI,CAAC,UAAAE,IAAI,EAAI;IACV;IACA,IAAIA,IAAI,CAACC,KAAK,EAAE;MACZ;MACAC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAER,IAAI,CAACC,SAAS,CAACI,IAAI,CAAC,CAAC;IACtD;IACA,OAAOA,IAAI;EACf,CAAC,CAAC;AACV;AAEA,SAASd,MAAMA,CAAA,EAAG;EACd;EACAgB,YAAY,CAACE,UAAU,CAAC,MAAM,CAAC;AACnC;AAEA,SAASjB,QAAQA,CAACa,IAAI,EAAE;EACpB,IAAMT,cAAc,GAAG;IACnBC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACI,IAAI;EAC7B,CAAC;EACD,OAAOH,KAAK,oBAAoBN,cAAc,CAAC,CAACO,IAAI,CAACC,cAAc,CAAC;AACxE;AAEA,SAASX,MAAMA,CAAA,EAAG;EACd,IAAMG,cAAc,GAAG;IACnBC,MAAM,EAAE,KAAK;IACbC,OAAO,EAAEV,UAAU,CAAC;EACxB,CAAC;EACD,OAAOc,KAAK,WAAWN,cAAc,CAAC,CAACO,IAAI,CAACC,cAAc,CAAC;AAC/D;AAEA,SAASA,cAAcA,CAACM,QAAQ,EAAE;EAC9B,OAAOA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAACR,IAAI,CAAC,UAAAQ,IAAI,EAAI;IAChC,IAAMC,IAAI,GAAGD,IAAI,IAAIX,IAAI,CAACa,KAAK,CAACF,IAAI,CAAC;IACrC,IAAI,CAACD,QAAQ,CAACI,EAAE,EAAE;MACd,IAAIJ,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;QACzB;QACAxB,MAAM,CAAC,CAAC;QACRyB,QAAQ,CAACC,MAAM,CAAC,IAAI,CAAC;MACzB;MACA,IAAMC,KAAK,GAAIN,IAAI,IAAIA,IAAI,CAACO,OAAO,IAAKT,QAAQ,CAACU,UAAU;MAC3D,OAAOC,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;IAChC;IACA,OAAON,IAAI;EACf,CAAC,CAAC;AACN"}]}