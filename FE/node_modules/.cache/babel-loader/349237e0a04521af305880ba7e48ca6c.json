{"remainingRequest":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\babel-loader\\lib\\index.js!D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\src\\state\\modules\\auth.js","dependencies":[{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\src\\state\\modules\\auth.js","mtime":1704440180000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\babel.config.js","mtime":1704440180000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704332086000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\babel-loader\\lib\\index.js","mtime":1704440412000},{"path":"D:\\TTTN2023\\Code\\QuanLyCongViec\\FE\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1704332098000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0IHsgZ2V0RmlyZWJhc2VCYWNrZW5kIH0gZnJvbSAnLi4vLi4vYXV0aFV0aWxzLmpzJzsKZXhwb3J0IHZhciBzdGF0ZSA9IHsKICBjdXJyZW50VXNlcjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYXV0aFVzZXInKQp9OwpleHBvcnQgdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfQ1VSUkVOVF9VU0VSOiBmdW5jdGlvbiBTRVRfQ1VSUkVOVF9VU0VSKHN0YXRlLCBuZXdWYWx1ZSkgewogICAgc3RhdGUuY3VycmVudFVzZXIgPSBuZXdWYWx1ZTsKICAgIHNhdmVTdGF0ZSgnYXV0aC5jdXJyZW50VXNlcicsIG5ld1ZhbHVlKTsKICB9Cn07CmV4cG9ydCB2YXIgZ2V0dGVycyA9IHsKICAvLyBXaGV0aGVyIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBsb2dnZWQgaW4uCiAgbG9nZ2VkSW46IGZ1bmN0aW9uIGxvZ2dlZEluKHN0YXRlKSB7CiAgICByZXR1cm4gISFzdGF0ZS5jdXJyZW50VXNlcjsKICB9Cn07CmV4cG9ydCB2YXIgYWN0aW9ucyA9IHsKICAvLyBUaGlzIGlzIGF1dG9tYXRpY2FsbHkgcnVuIGluIGBzcmMvc3RhdGUvc3RvcmUuanNgIHdoZW4gdGhlIGFwcAogIC8vIHN0YXJ0cywgYWxvbmcgd2l0aCBhbnkgb3RoZXIgYWN0aW9ucyBuYW1lZCBgaW5pdGAgaW4gb3RoZXIgbW9kdWxlcy4KICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICBpbml0OiBmdW5jdGlvbiBpbml0KF9yZWYpIHsKICAgIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsCiAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgIGRpc3BhdGNoKCd2YWxpZGF0ZScpOwogIH0sCiAgLy8gTG9ncyBpbiB0aGUgY3VycmVudCB1c2VyLgogIGxvZ0luOiBmdW5jdGlvbiBsb2dJbihfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgZGlzcGF0Y2ggPSBfcmVmMi5kaXNwYXRjaCwKICAgICAgZ2V0dGVycyA9IF9yZWYyLmdldHRlcnM7CiAgICB2YXIgX3JlZjMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9LAogICAgICBlbWFpbCA9IF9yZWYzLmVtYWlsLAogICAgICBwYXNzd29yZCA9IF9yZWYzLnBhc3N3b3JkOwogICAgaWYgKGdldHRlcnMubG9nZ2VkSW4pIHJldHVybiBkaXNwYXRjaCgndmFsaWRhdGUnKTsKICAgIHJldHVybiBnZXRGaXJlYmFzZUJhY2tlbmQoKS5sb2dpblVzZXIoZW1haWwsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICB2YXIgdXNlciA9IHJlc3BvbnNlOwogICAgICBjb21taXQoJ1NFVF9DVVJSRU5UX1VTRVInLCB1c2VyKTsKICAgICAgcmV0dXJuIHVzZXI7CiAgICB9KTsKICB9LAogIC8vIExvZ3Mgb3V0IHRoZSBjdXJyZW50IHVzZXIuCiAgbG9nT3V0OiBmdW5jdGlvbiBsb2dPdXQoX3JlZjQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICBjb21taXQoJ1NFVF9DVVJSRU5UX1VTRVInLCBudWxsKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgICBnZXRGaXJlYmFzZUJhY2tlbmQoKS5sb2dvdXQoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChfdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHJlZ2lzdGVyIHRoZSB1c2VyCiAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKF9yZWY1KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0LAogICAgICBkaXNwYXRjaCA9IF9yZWY1LmRpc3BhdGNoLAogICAgICBnZXR0ZXJzID0gX3JlZjUuZ2V0dGVyczsKICAgIHZhciBfcmVmNiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge30sCiAgICAgIHVzZXJuYW1lID0gX3JlZjYudXNlcm5hbWUsCiAgICAgIGVtYWlsID0gX3JlZjYuZW1haWwsCiAgICAgIHBhc3N3b3JkID0gX3JlZjYucGFzc3dvcmQ7CiAgICBpZiAoZ2V0dGVycy5sb2dnZWRJbikgcmV0dXJuIGRpc3BhdGNoKCd2YWxpZGF0ZScpOwogICAgcmV0dXJuIGdldEZpcmViYXNlQmFja2VuZCgpLnJlZ2lzdGVyVXNlcih1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICB2YXIgdXNlciA9IHJlc3BvbnNlOwogICAgICBjb21taXQoJ1NFVF9DVVJSRU5UX1VTRVInLCB1c2VyKTsKICAgICAgcmV0dXJuIHVzZXI7CiAgICB9KTsKICB9LAogIC8vIHJlZ2lzdGVyIHRoZSB1c2VyCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgcmVzZXRQYXNzd29yZDogZnVuY3Rpb24gcmVzZXRQYXNzd29yZChfcmVmNykgewogICAgdmFyIGNvbW1pdCA9IF9yZWY3LmNvbW1pdCwKICAgICAgZGlzcGF0Y2ggPSBfcmVmNy5kaXNwYXRjaCwKICAgICAgZ2V0dGVycyA9IF9yZWY3LmdldHRlcnM7CiAgICB2YXIgX3JlZjggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9LAogICAgICBlbWFpbCA9IF9yZWY4LmVtYWlsOwogICAgaWYgKGdldHRlcnMubG9nZ2VkSW4pIHJldHVybiBkaXNwYXRjaCgndmFsaWRhdGUnKTsKICAgIHJldHVybiBnZXRGaXJlYmFzZUJhY2tlbmQoKS5mb3JnZXRQYXNzd29yZChlbWFpbCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgdmFyIG1lc3NhZ2UgPSByZXNwb25zZS5kYXRhOwogICAgICByZXR1cm4gbWVzc2FnZTsKICAgIH0pOwogIH0sCiAgLy8gVmFsaWRhdGVzIHRoZSBjdXJyZW50IHVzZXIncyB0b2tlbiBhbmQgcmVmcmVzaGVzIGl0CiAgLy8gd2l0aCBuZXcgZGF0YSBmcm9tIHRoZSBBUEkuCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKF9yZWY5KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjkuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWY5LnN0YXRlOwogICAgaWYgKCFzdGF0ZS5jdXJyZW50VXNlcikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTsKICAgIHZhciB1c2VyID0gZ2V0RmlyZWJhc2VCYWNrZW5kKCkuZ2V0QXV0aGVudGljYXRlZFVzZXIoKTsKICAgIGNvbW1pdCgnU0VUX0NVUlJFTlRfVVNFUicsIHVzZXIpOwogICAgcmV0dXJuIHVzZXI7CiAgfQp9OwoKLy8gPT09Ci8vIFByaXZhdGUgaGVscGVycwovLyA9PT0KCmZ1bmN0aW9uIHNhdmVTdGF0ZShrZXksIHN0YXRlKSB7CiAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpOwp9"},{"version":3,"names":["getFirebaseBackend","state","currentUser","sessionStorage","getItem","mutations","SET_CURRENT_USER","newValue","saveState","getters","loggedIn","actions","init","_ref","dispatch","logIn","_ref2","commit","_ref3","arguments","length","undefined","email","password","loginUser","then","response","user","logOut","_ref4","_this","Promise","resolve","reject","logout","catch","error","_handleError","register","_ref5","_ref6","username","registerUser","resetPassword","_ref7","_ref8","forgetPassword","message","data","validate","_ref9","getAuthenticatedUser","key","window","setItem","JSON","stringify"],"sources":["D:/TTTN2023/Code/QuanLyCongViec/FE/src/state/modules/auth.js"],"sourcesContent":["import { getFirebaseBackend } from '../../authUtils.js'\r\n\r\nexport const state = {\r\n    currentUser: sessionStorage.getItem('authUser'),\r\n}\r\n\r\nexport const mutations = {\r\n    SET_CURRENT_USER(state, newValue) {\r\n        state.currentUser = newValue\r\n        saveState('auth.currentUser', newValue)\r\n    }\r\n}\r\n\r\nexport const getters = {\r\n    // Whether the user is currently logged in.\r\n    loggedIn(state) {\r\n        return !!state.currentUser\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    // This is automatically run in `src/state/store.js` when the app\r\n    // starts, along with any other actions named `init` in other modules.\r\n    // eslint-disable-next-line no-unused-vars\r\n    init({ state, dispatch }) {\r\n        dispatch('validate')\r\n    },\r\n\r\n    // Logs in the current user.\r\n    logIn({ commit, dispatch, getters }, { email, password } = {}) {\r\n        if (getters.loggedIn) return dispatch('validate')\r\n\r\n        return getFirebaseBackend().loginUser(email, password).then((response) => {\r\n            const user = response\r\n            commit('SET_CURRENT_USER', user)\r\n            return user\r\n        });\r\n    },\r\n\r\n    // Logs out the current user.\r\n    logOut({ commit }) {\r\n        // eslint-disable-next-line no-unused-vars\r\n        commit('SET_CURRENT_USER', null)\r\n        return new Promise((resolve, reject) => {\r\n            // eslint-disable-next-line no-unused-vars\r\n            getFirebaseBackend().logout().then((response) => {\r\n                resolve(true);\r\n            }).catch((error) => {\r\n                reject(this._handleError(error));\r\n            })\r\n        });\r\n    },\r\n\r\n    // register the user\r\n    register({ commit, dispatch, getters }, { username, email, password } = {}) {\r\n        if (getters.loggedIn) return dispatch('validate')\r\n\r\n        return getFirebaseBackend().registerUser(username, email, password).then((response) => {\r\n            const user = response\r\n            commit('SET_CURRENT_USER', user)\r\n            return user\r\n        });\r\n    },\r\n\r\n    // register the user\r\n    // eslint-disable-next-line no-unused-vars\r\n    resetPassword({ commit, dispatch, getters }, { email } = {}) {\r\n        if (getters.loggedIn) return dispatch('validate')\r\n\r\n        return getFirebaseBackend().forgetPassword(email).then((response) => {\r\n            const message = response.data\r\n            return message\r\n        });\r\n    },\r\n\r\n    // Validates the current user's token and refreshes it\r\n    // with new data from the API.\r\n    // eslint-disable-next-line no-unused-vars\r\n    validate({ commit, state }) {\r\n        if (!state.currentUser) return Promise.resolve(null)\r\n        const user = getFirebaseBackend().getAuthenticatedUser();\r\n        commit('SET_CURRENT_USER', user)\r\n        return user;\r\n    },\r\n}\r\n\r\n// ===\r\n// Private helpers\r\n// ===\r\n\r\nfunction saveState(key, state) {\r\n    window.sessionStorage.setItem(key, JSON.stringify(state))\r\n}\r\n"],"mappings":"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"}]}